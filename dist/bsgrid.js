angular.module("bsgrid.tpls").run(["$templateCache",function(e){e.put("template/bsgrid.html",'<div class="row bs-grid"><div class="col-sm-9"><div uib-dropdown=""><button class="btn btn-default" uib-dropdown-toggle="" ng-class="{ \'btn-sm\': options.pageSizeShow, \'btn-xs\': !options.pageSizeShow }">Options <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li ng-if="options.pageSizeShow" role="presentation" class="dropdown-header">Page Size</li><li ng-if="options.pageSizeShow" ng-repeat="size in options.pageSizeOptions" ng-class="{\'active\': options.pageSize === size }"><a tabindex="-1" ng-click="options.pageSize = size">{{ size }}</a></li><li ng-if="options.pageSizeShow" role="presentation" class="divider"></li><li role="presentation" class="dropdown-header">Columns</li><li ng-repeat="col in options.columns"><a ng-click="hideColumn(col)"><i ng-class="col.visible ? \'glyphicon glyphicon-ok\': \'glyphicon glyphicon-remove\'"></i> <span>{{ col.name }}</span></a></li></ul></div></div><div ng-if="options.showSearch" class="col-sm-3" style="margin-bottom: 10px" ng-class="{ \'col-sm-offset-9\': !options.pageSizeShow }"><div class="input-group input-group-sm"><input type="text" class="form-control" placeholder="Search" ng-model="options.searchFilter" ng-change="filter()" ng-model-options="{ debounce: { \'default\': 400, \'blur\': 0 } }"> <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span></div></div><div class="col-md-12" ng-class="{\'table-responsive\': options.scrollHorizontal}"><table class="table table-striped table-bordered table-hover table-condensed color2"><thead><tr><th ng-if="options.multiSelect" class="bs-grid-select"><input ng-if="options.multiSelect" type="checkbox" ng-model="selectAllToggle" ng-change="toggleSelectAll(selectAllToggle)"></th><th class="bs-grid-overflow" ng-repeat="col in options.columns" ng-click="sort(col, true)" style="width: {{ col.width }};" ng-show="col.visible"><div ng-drop="true" ng-drop-success="onDropComplete($index, $data, $evt)"><div ng-drag="true" ng-drag-data="col"><span>{{ col.name || col.field }}</span> <span ng-if="col.sorted" class="order" ng-class="{\'dropup\': col.reverse }"><span class="caret"></span></span></div></div></th></tr></thead><tbody><tr ng-repeat="item in displayedItems" ng-class="{\'info\' : isSelectedItem( item ) }" ng-click="selectItem(item)"><td ng-if="options.multiSelect"><input type="checkbox" class="bg-grid-checkbox" ng-checked="isSelectedItem(item)" ng-click="selectItemCheckbox($event, item)"></td><td class="bs-grid-overflow" ng-repeat="col in options.columns" ng-show="col.visible"><div ng-if="col.template" bs-grid-cell-template="{{ col.template }}"></div><div ng-if="!col.template" class="bs-grid-column bs-grid-column-{{col.field}}">{{ item[col.field] }}</div></td></tr></tbody></table></div><div ng-if="options.showFooter" class="col-md-12"><div class="col-sm-4"><div class="row"><span ng-if="options.selectedItems.length != 0">Selected <strong class=\'\\"text-primary\\"\'>{{options.selectedItems.length}}</strong></span> <span ng-class="{ \'text-danger\': displayedItems.length == 0}">Showing <strong>{{showing.begin}}</strong> to <strong>{{showing.end}}</strong> of <strong class=\'\\"text-primary\\"\'>{{ showing.of}}</strong> items</span></div><div class="row"><span ng-if="options.searchFilter">(<em>Filtered down from <strong>{{options.items.length}}</strong></em>)</span></div></div><div class="col-sm-8"><uib-pagination class="pagination-sm pull-right color2" boundary-links="true" max-size="9" items-per-page="options.pageSize" total-items="filteredItems.length" ng-model="options.currentPage" ng-change="getPage()" previous-text="Previous" next-text="Next" first-text="First" last-text="Last"></uib-pagination></div></div><div class="col-sm-9" ng-if="options.showExportButton"><div uib-dropdown=""><button class="btn btn-default btn-sm" type="button" uib-dropdown-toggle="">Export <span class=\'\\"caret\\"\'></span></button><ul class="dropdown-menu" role="menu"><li role="presentation" class="dropdown-header"><a tabindex="-1" ng-click="Export(exportTypes.FILTERED)">Filtered</a></li><li role="presentation" class="dropdown-header" ng-if="options.selectedItems[0]"><a ng-click="Export(exportTypes.SELECTED)">Selected</a></li><li role="presentation" class="dropdown-header"><a ng-click="Export(exportTypes.ALL)">All</a></li></ul></div></div></div>')}]),angular.module("bsgrid",["bsgrid.tpls"]).directive("bsGrid",function(){return{scope:{options:"="},templateUrl:"template/bsgrid.html",restrict:"E",controller:["$scope","$element","$filter","$timeout","$state","localStorageService",function(e,t,n,o,i,s){e.filteredItems=e.options.items,e.displayedItems=[],e.showing={begin:0,end:0,of:0},e.setUndefined=function(){angular.isUndefined(e.options.pageSizeShow)&&(e.options.pageSizeShow=!0),angular.isUndefined(e.options.pageSize)&&(e.options.pageSize=25),angular.isUndefined(e.options.pageSizeOptions)&&(e.options.pageSizeOptions=[10,25,50,100]),angular.isUndefined(e.options.localStorage)&&(e.options.localStorage=!1),angular.isUndefined(e.options.localStorageIgnorePageSize)&&(e.options.localStorageIgnorePageSize=!1),angular.isUndefined(e.options.lockTable)&&(e.options.lockTable=!0),angular.isUndefined(e.options.selectable)&&(e.options.selectable=!1),angular.isUndefined(e.options.multiSelect)&&(e.options.multiSelect=!1),angular.isUndefined(e.options.scope)&&(e.options.scope=e),e.scope=e.options.scope,angular.isUndefined(e.options.showSearch)&&(e.options.showSearch=!0),angular.isUndefined(e.options.showFooter)&&(e.options.showFooter=!0),angular.isUndefined(e.options.showExportButton)&&(e.options.showExportButton=!0),angular.isUndefined(e.options.name)&&(e.options.name=i.current.name),angular.isUndefined(e.options.scrollHorizontal)&&(e.options.scrollHorizontal=!0),_.forEach(e.options.columns,function(e){if(angular.isUndefined(e.width)&&(e.width="auto"),angular.isUndefined(e.sortable)&&(e.sortable=!0),angular.isUndefined(e.name)&&angular.isUndefined(e.field))throw"bsgrid: Name is required if no field is provided.";angular.isUndefined(e.visible)&&(e.visible=!0)})},e.localStorageName=function(){return"bsGrid-"+e.options.name},e.getLocalStorage=function(){if(e.options.localStorage){var t=s.get(e.localStorageName());if(t&&(angular.isDefined(t.pageSize)&&!e.options.localStorageIgnorePageSize&&(e.options.pageSize=t.pageSize),angular.isDefined(t.columns))){var n=!1;_.forEach(t.columns,function(t,o){var i=_.findIndex(e.options.columns,{name:t.name});if(i>=0){if(o!==i){var s=e.options.columns[i];e.options.columns[i]=e.options.columns[o],e.options.columns[o]=s}e.options.columns[o].visible=t.visible,e.options.columns[o].sorted=t.sorted,angular.isDefined(t.reverse)&&(e.options.columns[o].reverse=t.reverse),t.sorted&&(n=!0)}}),n||(e.options.columns[0].sorted=!0)}}},e.hideColumn=function(t){t.visible=!t.visible,e.setLocalStorage()},e.setLocalStorage=function(){e.options.localStorage&&s.set(e.localStorageName(),{pageSize:e.options.pageSize,columns:e.options.columns})},e.onDropComplete=function(t,n){var o=e.options.columns.indexOf(n);e.options.columns.splice(o,1),e.options.columns.splice(t,0,n),e.setLocalStorage()},e.setWatches=function(){e.$watch(function(){return e.options.pageSize},function(){e.setLocalStorage(),e.options.currentPage=1,e.getPage()},!0),e.$watch(function(){return e.options.items},function(){var t=[];_.forEach(e.options.selectedItems,function(n){var o=_(e.options.items).indexOf(n);-1===o&&t.push(n)}),_.forEach(t,function(t){var n=null,o=null;angular.isDefined(t.id)&&(n=_.where(e.options.items,{id:t.id}),1===n.length&&(o=n[0]));var i=_.indexOf(e.options.selectedItems,t);o?e.options.selectedItems.splice(i,1,o):e.options.selectedItems.splice(i)}),e.start()},!0)},e.getPage=function(){var t=(e.options.currentPage-1)*e.options.pageSize,n=t+e.options.pageSize;e.displayedItems=e.filteredItems.slice(t,n),0===e.displayedItems.length?e.showing.begin=t:e.showing.begin=t+1,e.showing.end=t+e.displayedItems.length,e.showing.of=e.filteredItems.length},e.sort=function(t,o){if(t.sortable===!0){_.forEach(e.options.columns,function(e){e!==t&&(e.sorted=!1,e.reverse=!1)}),t.sorted=!0,o&&(t.reverse=!t.reverse);var i=n("orderBy");e.filteredItems=i(e.filteredItems,t.field,t.reverse),e.getPage(),e.setLocalStorage()}},e.filter=function(){var t=n("filter");e.filteredItems=t(e.options.items,e.options.searchFilter),e.getPage()},e.selectItem=function(t){if(e.options.selectable){var n=_.indexOf(e.options.selectedItems,t);if(-1!==n)return void e.options.selectedItems.splice(n,1);e.options.multiSelect||1!==e.options.selectedItems.length||e.options.selectedItems.splice(0,1),e.options.selectedItems.push(t)}},e.selectItemCheckbox=function(t,n){t.stopPropagation(),e.selectItem(n)},e.isSelectedItem=function(t){var n=_.indexOf(e.options.selectedItems,t);return-1!==n?!0:!1},e.toggleSelectAll=function(t){t?_.forEach(e.filteredItems,function(t){e.isSelectedItem(t)||e.selectItem(t)}):_.forEach(e.filteredItems,function(t){e.isSelectedItem(t)&&e.selectItem(t)})},e.lockTable=function(){e.options.lockTable&&o(function(){var n=angular.element(t).find("div table thead tr th"),o=0;_.forEach(n,function(t){var n=angular.element(t);e.options.selectable&&0===o?o--:"auto"===e.options.columns[o].width&&angular.element(n).css("width",t.offsetWidth),o++});var i=angular.element(t).find("div table");angular.element(i).css("table-layout","fixed")},0)},e.start=function(){""!==e.options.searchFilter&&e.filter();var t=_.find(e.options.columns,"sorted");angular.isDefined(t)?e.sort(t,!1):e.getPage()},e.init=function(){e.setUndefined(),e.getLocalStorage(),e.setWatches(),e.lockTable(),e.start()},e.init(),e.exportTypes={FILTERED:0,SELECTED:1,ALL:2},e.GetRowsForExport=function(t,n,o){var i=0,s="",a=[];switch(t){case e.exportTypes.FILTERED:a=e.displayedItems;break;case e.exportTypes.SELECTED:a=e.options.selectedItems;break;case e.exportTypes.ALL:a=e.options.items}return _.each(a,function(t){_.each(n,function(n){s=angular.isDefined(t[n])?t[n]:angular.isDefined(t.search)&&angular.isDefined(t.search[n])?t.search[n]:"",o+='"'+e.csvStringify(s)+'",'}),o=e.swapLastCommaForNewline(o),i++}),o},e.csvStringify=function(e){return null===e||angular.isUndefined(e)?"":angular.isNumber(e)?""+e:angular.isBoolean(e)?e?"True":"False":angular.isString(e)?e.replace(/"/g,'""'):angular.toJson(e).replace(/"/g,'""')},e.swapLastCommaForNewline=function(e){var t=e.substr(0,e.length-1);return t+"\n"},e.SubmitFileToUser=function(e){var t=angular.element("<a/>");t.attr({href:"data:attachment/csv;charset=utf-8,"+encodeURI(e),target:"_blank",download:"export.csv"})[0].click()},e.Export=function(t){var n=[],o="",i=[];_.each(e.options.columns,function(e){n.push(e.field),i.push(e.name)}),_.each(i,function(t){o+='"'+e.csvStringify(t)+'",'}),o=e.swapLastCommaForNewline(o),o=e.GetRowsForExport(t,n,o),e.SubmitFileToUser(o)}}]}}),angular.module("app").directive("bsGridCellTemplate",["$compile",function(e){return{scope:!0,link:function(t,n,o){var i;o.$observe("bsGridCellTemplate",function(o){angular.isDefined(o)&&(i=e(o)(t),n.html(""),n.append(i))})}}}]),angular.module("bsgrid").filter("naturalSortBy",["$parse",function(e){function t(e,n){var o,i,s=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,a=/(^[ ]*|[ ]*$)/g,l=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,r=/^0x[0-9a-f]+$/i,c=/^0/,p=function(e){return t.insensitive&&(""+e).toLowerCase()||""+e},d=p(e).replace(a,"")||"",g=p(n).replace(a,"")||"",u=d.replace(s,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),f=g.replace(s,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),m=parseInt(d.match(r))||1!=u.length&&d.match(l)&&Date.parse(d),h=parseInt(g.match(r))||m&&g.match(l)&&Date.parse(g)||null;if(h){if(h>m)return-1;if(m>h)return 1}for(var v=0,b=Math.max(u.length,f.length);b>v;v++){if(o=!(u[v]||"").match(c)&&parseFloat(u[v])||u[v]||0,i=!(f[v]||"").match(c)&&parseFloat(f[v])||f[v]||0,isNaN(o)!==isNaN(i))return isNaN(o)?1:-1;if(typeof o!=typeof i&&(o+="",i+=""),i>o)return-1;if(o>i)return 1}return 0}return function(n,o,i){function s(e,t){for(var n=0;n<o.length;n++){var i=o[n](e,t);if(0!==i)return i}return 0}function a(e,t){return t?function(t,n){return e(n,t)}:e}if(!angular.isArray(n))return n;if(!o)return n;o=angular.isArray(o)?o:[o],o=_.map(o,function(n){var o=!1,i=n||angular.identity;if(angular.isString(n)&&(("+"==n.charAt(0)||"-"==n.charAt(0))&&(o="-"==n.charAt(0),n=n.substring(1)),i=e(n),i.constant)){var s=i();return a(function(e,n){return t(e[s],n[s])},o)}return a(function(e,n){return t(i(e),i(n))},o)});for(var l=[],r=0;r<n.length;r++)l.push(n[r]);return l.sort(a(s,i))}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJzZ3JpZENhY2hlSHRtbC5qcyIsImJzZ3JpZC1kaXJlY3RpdmUuanMiLCJuYXR1cmFsLXNvcnQtYnktZmlsdGVyLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJydW4iLCIkdGVtcGxhdGVDYWNoZSIsInB1dCIsImRpcmVjdGl2ZSIsInNjb3BlIiwib3B0aW9ucyIsInRlbXBsYXRlVXJsIiwicmVzdHJpY3QiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwiJGVsZW1lbnQiLCIkZmlsdGVyIiwiJHRpbWVvdXQiLCIkc3RhdGUiLCJsb2NhbFN0b3JhZ2VTZXJ2aWNlIiwiZmlsdGVyZWRJdGVtcyIsIml0ZW1zIiwiZGlzcGxheWVkSXRlbXMiLCJzaG93aW5nIiwiYmVnaW4iLCJlbmQiLCJvZiIsInNldFVuZGVmaW5lZCIsImlzVW5kZWZpbmVkIiwicGFnZVNpemVTaG93IiwicGFnZVNpemUiLCJwYWdlU2l6ZU9wdGlvbnMiLCJsb2NhbFN0b3JhZ2UiLCJsb2NhbFN0b3JhZ2VJZ25vcmVQYWdlU2l6ZSIsImxvY2tUYWJsZSIsInNlbGVjdGFibGUiLCJtdWx0aVNlbGVjdCIsInNob3dTZWFyY2giLCJzaG93Rm9vdGVyIiwic2hvd0V4cG9ydEJ1dHRvbiIsIm5hbWUiLCJjdXJyZW50Iiwic2Nyb2xsSG9yaXpvbnRhbCIsIl8iLCJmb3JFYWNoIiwiY29sdW1ucyIsImMiLCJ3aWR0aCIsInNvcnRhYmxlIiwiZmllbGQiLCJ2aXNpYmxlIiwibG9jYWxTdG9yYWdlTmFtZSIsImdldExvY2FsU3RvcmFnZSIsImRhdGEiLCJnZXQiLCJpc0RlZmluZWQiLCJpc1NvcnRlZCIsImkiLCJpbmRleCIsImZpbmRJbmRleCIsInRtcCIsInNvcnRlZCIsInJldmVyc2UiLCJoaWRlQ29sdW1uIiwic2V0TG9jYWxTdG9yYWdlIiwic2V0Iiwib25Ecm9wQ29tcGxldGUiLCJvYmoiLCJvdGhlckluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsInNldFdhdGNoZXMiLCIkd2F0Y2giLCJjdXJyZW50UGFnZSIsImdldFBhZ2UiLCJuZXdTZWxlY3RlZCIsInNlbGVjdGVkSXRlbXMiLCJpdGVtIiwicHVzaCIsIm1hdGNoZXMiLCJtYXRjaCIsImlkIiwid2hlcmUiLCJsZW5ndGgiLCJzSW5kZXgiLCJzdGFydCIsInNsaWNlIiwic29ydCIsImNvbCIsImNoYW5nZVJldmVyc2UiLCJmaWx0ZXIiLCJzZWFyY2hGaWx0ZXIiLCJzZWxlY3RJdGVtIiwic2VsZWN0SXRlbUNoZWNrYm94IiwiJGV2ZW50Iiwic3RvcFByb3BhZ2F0aW9uIiwiaXNTZWxlY3RlZEl0ZW0iLCJ0b2dnbGVTZWxlY3RBbGwiLCJ2YWx1ZSIsInRocyIsImVsZW1lbnQiLCJmaW5kIiwidGgiLCJlIiwiY3NzIiwib2Zmc2V0V2lkdGgiLCJ0YWJsZSIsImluaXQiLCJleHBvcnRUeXBlcyIsIkZJTFRFUkVEIiwiU0VMRUNURUQiLCJBTEwiLCJHZXRSb3dzRm9yRXhwb3J0IiwiZXhwb3J0VHlwZSIsImZpZWxkTmFtZXMiLCJjc3ZEYXRhIiwiaXRlbUluZGV4IiwiY3VyQ2VsbFJhdyIsIml0ZW1zVG9FeHBvcnQiLCJlYWNoIiwiaXRlbVRvRXhwb3J0IiwiZmllbGROYW1lIiwic2VhcmNoIiwiY3N2U3RyaW5naWZ5Iiwic3dhcExhc3RDb21tYUZvck5ld2xpbmUiLCJzdHIiLCJpc051bWJlciIsImlzQm9vbGVhbiIsImlzU3RyaW5nIiwicmVwbGFjZSIsInRvSnNvbiIsIm5ld1N0ciIsInN1YnN0ciIsIlN1Ym1pdEZpbGVUb1VzZXIiLCJhdHRyIiwiaHJlZiIsImVuY29kZVVSSSIsInRhcmdldCIsImRvd25sb2FkIiwiY2xpY2siLCJFeHBvcnQiLCJyZXF1ZXN0cyIsInYiLCIkY29tcGlsZSIsImxpbmsiLCJhdHRycyIsImVsIiwiJG9ic2VydmUiLCJ0cGwiLCJodG1sIiwiYXBwZW5kIiwiJHBhcnNlIiwibmF0dXJhbFNvcnQiLCJhIiwiYiIsIm9GeE5jTCIsIm9GeU5jTCIsInJlIiwic3JlIiwiZHJlIiwiaHJlIiwib3JlIiwicyIsImluc2Vuc2l0aXZlIiwidG9Mb3dlckNhc2UiLCJ4IiwieSIsInhOIiwic3BsaXQiLCJ5TiIsInhEIiwicGFyc2VJbnQiLCJEYXRlIiwicGFyc2UiLCJ5RCIsImNMb2MiLCJudW1TIiwiTWF0aCIsIm1heCIsInBhcnNlRmxvYXQiLCJpc05hTiIsImFycmF5Iiwic29ydFByZWRpY2F0ZSIsInJldmVyc2VPcmRlciIsImNvbXBhcmF0b3IiLCJvMSIsIm8yIiwiY29tcCIsInJldmVyc2VDb21wYXJhdG9yIiwiZGVzY2VuZGluZyIsImlzQXJyYXkiLCJtYXAiLCJwcmVkaWNhdGUiLCJpZGVudGl0eSIsImNoYXJBdCIsInN1YnN0cmluZyIsImNvbnN0YW50Iiwia2V5IiwiYXJyYXlDb3B5Il0sIm1hcHBpbmdzIjoiQUFBQUEsUUFBQUMsT0FBQSxlQUFBQyxLQUFBLGlCQUFBLFNBQUFDLEdBQUFBLEVBQUFDLElBQUEsdUJBQUEsaXZJQ09BSixRQUFBQyxPQUFBLFVBQUEsZ0JBQUFJLFVBQUEsU0FBQSxXQUNBLE9BQ0FDLE9BQ0FDLFFBQUEsS0FFQUMsWUFBQSx1QkFDQUMsU0FBQSxJQUNBQyxZQUFBLFNBQUEsV0FBQSxVQUFBLFdBQUEsU0FBQSxzQkFBQSxTQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUVBTCxFQUFBTSxjQUFBTixFQUFBSixRQUFBVyxNQUNBUCxFQUFBUSxrQkFFQVIsRUFBQVMsU0FDQUMsTUFBQSxFQUNBQyxJQUFBLEVBQ0FDLEdBQUEsR0FJQVosRUFBQWEsYUFBQSxXQUNBeEIsUUFBQXlCLFlBQUFkLEVBQUFKLFFBQUFtQixnQkFDQWYsRUFBQUosUUFBQW1CLGNBQUEsR0FFQTFCLFFBQUF5QixZQUFBZCxFQUFBSixRQUFBb0IsWUFDQWhCLEVBQUFKLFFBQUFvQixTQUFBLElBRUEzQixRQUFBeUIsWUFBQWQsRUFBQUosUUFBQXFCLG1CQUNBakIsRUFBQUosUUFBQXFCLGlCQUFBLEdBQUEsR0FBQSxHQUFBLE1BRUE1QixRQUFBeUIsWUFBQWQsRUFBQUosUUFBQXNCLGdC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REFTLE1BQ0E3SSxFQUFBLEVBQUFBLEVBQUE0SCxFQUFBbEcsT0FBQTFCLElBQUE2SSxFQUFBeEgsS0FBQXVHLEVBQUE1SCxHQUNBLE9BQUE2SSxHQUFBL0csS0FBQXFHLEVBQUFKLEVBQUFEIiwiZmlsZSI6ImJzZ3JpZC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKFwiYnNncmlkLnRwbHNcIikucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7JHRlbXBsYXRlQ2FjaGUucHV0KFwidGVtcGxhdGUvYnNncmlkLmh0bWxcIixcIjxkaXYgY2xhc3M9XFxcInJvdyBicy1ncmlkXFxcIj48ZGl2IGNsYXNzPVxcXCJjb2wtc20tOVxcXCI+PGRpdiB1aWItZHJvcGRvd249XFxcIlxcXCI+PGJ1dHRvbiBjbGFzcz1cXFwiYnRuIGJ0bi1kZWZhdWx0XFxcIiB1aWItZHJvcGRvd24tdG9nZ2xlPVxcXCJcXFwiIG5nLWNsYXNzPVxcXCJ7IFxcJ2J0bi1zbVxcJzogb3B0aW9ucy5wYWdlU2l6ZVNob3csIFxcJ2J0bi14c1xcJzogIW9wdGlvbnMucGFnZVNpemVTaG93IH1cXFwiPk9wdGlvbnMgPHNwYW4gY2xhc3M9XFxcImNhcmV0XFxcIj48L3NwYW4+PC9idXR0b24+PHVsIGNsYXNzPVxcXCJkcm9wZG93bi1tZW51XFxcIiByb2xlPVxcXCJtZW51XFxcIj48bGkgbmctaWY9XFxcIm9wdGlvbnMucGFnZVNpemVTaG93XFxcIiByb2xlPVxcXCJwcmVzZW50YXRpb25cXFwiIGNsYXNzPVxcXCJkcm9wZG93bi1oZWFkZXJcXFwiPlBhZ2UgU2l6ZTwvbGk+PGxpIG5nLWlmPVxcXCJvcHRpb25zLnBhZ2VTaXplU2hvd1xcXCIgbmctcmVwZWF0PVxcXCJzaXplIGluIG9wdGlvbnMucGFnZVNpemVPcHRpb25zXFxcIiBuZy1jbGFzcz1cXFwie1xcJ2FjdGl2ZVxcJzogb3B0aW9ucy5wYWdlU2l6ZSA9PT0gc2l6ZSB9XFxcIj48YSB0YWJpbmRleD1cXFwiLTFcXFwiIG5nLWNsaWNrPVxcXCJvcHRpb25zLnBhZ2VTaXplID0gc2l6ZVxcXCI+e3sgc2l6ZSB9fTwvYT48L2xpPjxsaSBuZy1pZj1cXFwib3B0aW9ucy5wYWdlU2l6ZVNob3dcXFwiIHJvbGU9XFxcInByZXNlbnRhdGlvblxcXCIgY2xhc3M9XFxcImRpdmlkZXJcXFwiPjwvbGk+PGxpIHJvbGU9XFxcInByZXNlbnRhdGlvblxcXCIgY2xhc3M9XFxcImRyb3Bkb3duLWhlYWRlclxcXCI+Q29sdW1uczwvbGk+PGxpIG5nLXJlcGVhdD1cXFwiY29sIGluIG9wdGlvbnMuY29sdW1uc1xcXCI+PGEgbmctY2xpY2s9XFxcImhpZGVDb2x1bW4oY29sKVxcXCI+PGkgbmctY2xhc3M9XFxcImNvbC52aXNpYmxlID8gXFwnZ2x5cGhpY29uIGdseXBoaWNvbi1va1xcJzogXFwnZ2x5cGhpY29uIGdseXBoaWNvbi1yZW1vdmVcXCdcXFwiPjwvaT4gPHNwYW4+e3sgY29sLm5hbWUgfX08L3NwYW4+PC9hPjwvbGk+PC91bD48L2Rpdj48L2Rpdj48ZGl2IG5nLWlmPVxcXCJvcHRpb25zLnNob3dTZWFyY2hcXFwiIGNsYXNzPVxcXCJjb2wtc20tM1xcXCIgc3R5bGU9XFxcIm1hcmdpbi1ib3R0b206IDEwcHhcXFwiIG5nLWNsYXNzPVxcXCJ7IFxcJ2NvbC1zbS1vZmZzZXQtOVxcJzogIW9wdGlvbnMucGFnZVNpemVTaG93IH1cXFwiPjxkaXYgY2xhc3M9XFxcImlucHV0LWdyb3VwIGlucHV0LWdyb3VwLXNtXFxcIj48aW5wdXQgdHlwZT1cXFwidGV4dFxcXCIgY2xhc3M9XFxcImZvcm0tY29udHJvbFxcXCIgcGxhY2Vob2xkZXI9XFxcIlNlYXJjaFxcXCIgbmctbW9kZWw9XFxcIm9wdGlvbnMuc2VhcmNoRmlsdGVyXFxcIiBuZy1jaGFuZ2U9XFxcImZpbHRlcigpXFxcIiBuZy1tb2RlbC1vcHRpb25zPVxcXCJ7IGRlYm91bmNlOiB7IFxcJ2RlZmF1bHRcXCc6IDQwMCwgXFwnYmx1clxcJzogMCB9IH1cXFwiPiA8c3BhbiBjbGFzcz1cXFwiaW5wdXQtZ3JvdXAtYWRkb25cXFwiPjxpIGNsYXNzPVxcXCJnbHlwaGljb24gZ2x5cGhpY29uLXNlYXJjaFxcXCI+PC9pPjwvc3Bhbj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbWQtMTJcXFwiIG5nLWNsYXNzPVxcXCJ7XFwndGFibGUtcmVzcG9uc2l2ZVxcJzogb3B0aW9ucy5zY3JvbGxIb3Jpem9udGFsfVxcXCI+PHRhYmxlIGNsYXNzPVxcXCJ0YWJsZSB0YWJsZS1zdHJpcGVkIHRhYmxlLWJvcmRlcmVkIHRhYmxlLWhvdmVyIHRhYmxlLWNvbmRlbnNlZCBjb2xvcjJcXFwiPjx0aGVhZD48dHI+PHRoIG5nLWlmPVxcXCJvcHRpb25zLm11bHRpU2VsZWN0XFxcIiBjbGFzcz1cXFwiYnMtZ3JpZC1zZWxlY3RcXFwiPjxpbnB1dCBuZy1pZj1cXFwib3B0aW9ucy5tdWx0aVNlbGVjdFxcXCIgdHlwZT1cXFwiY2hlY2tib3hcXFwiIG5nLW1vZGVsPVxcXCJzZWxlY3RBbGxUb2dnbGVcXFwiIG5nLWNoYW5nZT1cXFwidG9nZ2xlU2VsZWN0QWxsKHNlbGVjdEFsbFRvZ2dsZSlcXFwiPjwvdGg+PHRoIGNsYXNzPVxcXCJicy1ncmlkLW92ZXJmbG93XFxcIiBuZy1yZXBlYXQ9XFxcImNvbCBpbiBvcHRpb25zLmNvbHVtbnNcXFwiIG5nLWNsaWNrPVxcXCJzb3J0KGNvbCwgdHJ1ZSlcXFwiIHN0eWxlPVxcXCJ3aWR0aDoge3sgY29sLndpZHRoIH19O1xcXCIgbmctc2hvdz1cXFwiY29sLnZpc2libGVcXFwiPjxkaXYgbmctZHJvcD1cXFwidHJ1ZVxcXCIgbmctZHJvcC1zdWNjZXNzPVxcXCJvbkRyb3BDb21wbGV0ZSgkaW5kZXgsICRkYXRhLCAkZXZ0KVxcXCI+PGRpdiBuZy1kcmFnPVxcXCJ0cnVlXFxcIiBuZy1kcmFnLWRhdGE9XFxcImNvbFxcXCI+PHNwYW4+e3sgY29sLm5hbWUgfHwgY29sLmZpZWxkIH19PC9zcGFuPiA8c3BhbiBuZy1pZj1cXFwiY29sLnNvcnRlZFxcXCIgY2xhc3M9XFxcIm9yZGVyXFxcIiBuZy1jbGFzcz1cXFwie1xcJ2Ryb3B1cFxcJzogY29sLnJldmVyc2UgfVxcXCI+PHNwYW4gY2xhc3M9XFxcImNhcmV0XFxcIj48L3NwYW4+PC9zcGFuPjwvZGl2PjwvZGl2PjwvdGg+PC90cj48L3RoZWFkPjx0Ym9keT48dHIgbmctcmVwZWF0PVxcXCJpdGVtIGluIGRpc3BsYXllZEl0ZW1zXFxcIiBuZy1jbGFzcz1cXFwie1xcJ2luZm9cXCcgOiBpc1NlbGVjdGVkSXRlbSggaXRlbSApIH1cXFwiIG5nLWNsaWNrPVxcXCJzZWxlY3RJdGVtKGl0ZW0pXFxcIj48dGQgbmctaWY9XFxcIm9wdGlvbnMubXVsdGlTZWxlY3RcXFwiPjxpbnB1dCB0eXBlPVxcXCJjaGVja2JveFxcXCIgY2xhc3M9XFxcImJnLWdyaWQtY2hlY2tib3hcXFwiIG5nLWNoZWNrZWQ9XFxcImlzU2VsZWN0ZWRJdGVtKGl0ZW0pXFxcIiBuZy1jbGljaz1cXFwic2VsZWN0SXRlbUNoZWNrYm94KCRldmVudCwgaXRlbSlcXFwiPjwvdGQ+PHRkIGNsYXNzPVxcXCJicy1ncmlkLW92ZXJmbG93XFxcIiBuZy1yZXBlYXQ9XFxcImNvbCBpbiBvcHRpb25zLmNvbHVtbnNcXFwiIG5nLXNob3c9XFxcImNvbC52aXNpYmxlXFxcIj48ZGl2IG5nLWlmPVxcXCJjb2wudGVtcGxhdGVcXFwiIGJzLWdyaWQtY2VsbC10ZW1wbGF0ZT1cXFwie3sgY29sLnRlbXBsYXRlIH19XFxcIj48L2Rpdj48ZGl2IG5nLWlmPVxcXCIhY29sLnRlbXBsYXRlXFxcIiBjbGFzcz1cXFwiYnMtZ3JpZC1jb2x1bW4gYnMtZ3JpZC1jb2x1bW4te3tjb2wuZmllbGR9fVxcXCI+e3sgaXRlbVtjb2wuZmllbGRdIH19PC9kaXY+PC90ZD48L3RyPjwvdGJvZHk+PC90YWJsZT48L2Rpdj48ZGl2IG5nLWlmPVxcXCJvcHRpb25zLnNob3dGb290ZXJcXFwiIGNsYXNzPVxcXCJjb2wtbWQtMTJcXFwiPjxkaXYgY2xhc3M9XFxcImNvbC1zbS00XFxcIj48ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPjxzcGFuIG5nLWlmPVxcXCJvcHRpb25zLnNlbGVjdGVkSXRlbXMubGVuZ3RoICE9IDBcXFwiPlNlbGVjdGVkIDxzdHJvbmcgY2xhc3M9XFwnXFxcXFxcXCJ0ZXh0LXByaW1hcnlcXFxcXFxcIlxcJz57e29wdGlvbnMuc2VsZWN0ZWRJdGVtcy5sZW5ndGh9fTwvc3Ryb25nPjwvc3Bhbj4gPHNwYW4gbmctY2xhc3M9XFxcInsgXFwndGV4dC1kYW5nZXJcXCc6IGRpc3BsYXllZEl0ZW1zLmxlbmd0aCA9PSAwfVxcXCI+U2hvd2luZyA8c3Ryb25nPnt7c2hvd2luZy5iZWdpbn19PC9zdHJvbmc+IHRvIDxzdHJvbmc+e3tzaG93aW5nLmVuZH19PC9zdHJvbmc+IG9mIDxzdHJvbmcgY2xhc3M9XFwnXFxcXFxcXCJ0ZXh0LXByaW1hcnlcXFxcXFxcIlxcJz57eyBzaG93aW5nLm9mfX08L3N0cm9uZz4gaXRlbXM8L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cXFwicm93XFxcIj48c3BhbiBuZy1pZj1cXFwib3B0aW9ucy5zZWFyY2hGaWx0ZXJcXFwiPig8ZW0+RmlsdGVyZWQgZG93biBmcm9tIDxzdHJvbmc+e3tvcHRpb25zLml0ZW1zLmxlbmd0aH19PC9zdHJvbmc+PC9lbT4pPC9zcGFuPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1zbS04XFxcIj48dWliLXBhZ2luYXRpb24gY2xhc3M9XFxcInBhZ2luYXRpb24tc20gcHVsbC1yaWdodCBjb2xvcjJcXFwiIGJvdW5kYXJ5LWxpbmtzPVxcXCJ0cnVlXFxcIiBtYXgtc2l6ZT1cXFwiOVxcXCIgaXRlbXMtcGVyLXBhZ2U9XFxcIm9wdGlvbnMucGFnZVNpemVcXFwiIHRvdGFsLWl0ZW1zPVxcXCJmaWx0ZXJlZEl0ZW1zLmxlbmd0aFxcXCIgbmctbW9kZWw9XFxcIm9wdGlvbnMuY3VycmVudFBhZ2VcXFwiIG5nLWNoYW5nZT1cXFwiZ2V0UGFnZSgpXFxcIiBwcmV2aW91cy10ZXh0PVxcXCJQcmV2aW91c1xcXCIgbmV4dC10ZXh0PVxcXCJOZXh0XFxcIiBmaXJzdC10ZXh0PVxcXCJGaXJzdFxcXCIgbGFzdC10ZXh0PVxcXCJMYXN0XFxcIj48L3VpYi1wYWdpbmF0aW9uPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1zbS05XFxcIiBuZy1pZj1cXFwib3B0aW9ucy5zaG93RXhwb3J0QnV0dG9uXFxcIj48ZGl2IHVpYi1kcm9wZG93bj1cXFwiXFxcIj48YnV0dG9uIGNsYXNzPVxcXCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtXFxcIiB0eXBlPVxcXCJidXR0b25cXFwiIHVpYi1kcm9wZG93bi10b2dnbGU9XFxcIlxcXCI+RXhwb3J0IDxzcGFuIGNsYXNzPVxcJ1xcXFxcXFwiY2FyZXRcXFxcXFxcIlxcJz48L3NwYW4+PC9idXR0b24+PHVsIGNsYXNzPVxcXCJkcm9wZG93bi1tZW51XFxcIiByb2xlPVxcXCJtZW51XFxcIj48bGkgcm9sZT1cXFwicHJlc2VudGF0aW9uXFxcIiBjbGFzcz1cXFwiZHJvcGRvd24taGVhZGVyXFxcIj48YSB0YWJpbmRleD1cXFwiLTFcXFwiIG5nLWNsaWNrPVxcXCJFeHBvcnQoZXhwb3J0VHlwZXMuRklMVEVSRUQpXFxcIj5GaWx0ZXJlZDwvYT48L2xpPjxsaSByb2xlPVxcXCJwcmVzZW50YXRpb25cXFwiIGNsYXNzPVxcXCJkcm9wZG93bi1oZWFkZXJcXFwiIG5nLWlmPVxcXCJvcHRpb25zLnNlbGVjdGVkSXRlbXNbMF1cXFwiPjxhIG5nLWNsaWNrPVxcXCJFeHBvcnQoZXhwb3J0VHlwZXMuU0VMRUNURUQpXFxcIj5TZWxlY3RlZDwvYT48L2xpPjxsaSByb2xlPVxcXCJwcmVzZW50YXRpb25cXFwiIGNsYXNzPVxcXCJkcm9wZG93bi1oZWFkZXJcXFwiPjxhIG5nLWNsaWNrPVxcXCJFeHBvcnQoZXhwb3J0VHlwZXMuQUxMKVxcXCI+QWxsPC9hPjwvbGk+PC91bD48L2Rpdj48L2Rpdj48L2Rpdj5cIik7fV0pOyIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBAbmdEb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBic0dyaWRcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gYnNHcmlkXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdic2dyaWQnLCBbJ2JzZ3JpZC50cGxzJ10pLmRpcmVjdGl2ZSgnYnNHcmlkJywgZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHNjb3BlOiB7XG4gICAgICBvcHRpb25zOiAnPSdcbiAgICB9LFxuICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGUvYnNncmlkLmh0bWwnLFxuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgY29udHJvbGxlcjogZnVuY3Rpb24gKCRzY29wZSwgJGVsZW1lbnQsICRmaWx0ZXIsICR0aW1lb3V0LCAkc3RhdGUsIGxvY2FsU3RvcmFnZVNlcnZpY2UpIHtcblxuICAgICAgJHNjb3BlLmZpbHRlcmVkSXRlbXMgPSAkc2NvcGUub3B0aW9ucy5pdGVtcztcbiAgICAgICRzY29wZS5kaXNwbGF5ZWRJdGVtcyA9IFtdO1xuXG4gICAgICAkc2NvcGUuc2hvd2luZyA9IHtcbiAgICAgICAgYmVnaW46IDAsXG4gICAgICAgIGVuZDogMCxcbiAgICAgICAgb2Y6IDBcbiAgICAgIH07XG5cbiAgICAgIC8vc2V0IHZhbHVlcyBpZiBub3QgZGVmaW5lZFxuICAgICAgJHNjb3BlLnNldFVuZGVmaW5lZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoJHNjb3BlLm9wdGlvbnMucGFnZVNpemVTaG93KSkge1xuICAgICAgICAgICRzY29wZS5vcHRpb25zLnBhZ2VTaXplU2hvdyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoJHNjb3BlLm9wdGlvbnMucGFnZVNpemUpKSB7XG4gICAgICAgICAgJHNjb3BlLm9wdGlvbnMucGFnZVNpemUgPSAyNTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZCgkc2NvcGUub3B0aW9ucy5wYWdlU2l6ZU9wdGlvbnMpKSB7XG4gICAgICAgICAgJHNjb3BlLm9wdGlvbnMucGFnZVNpemVPcHRpb25zID0gWzEwLCAyNSwgNTAsIDEwMF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoJHNjb3BlLm9wdGlvbnMubG9jYWxTdG9yYWdlKSkge1xuICAgICAgICAgICRzY29wZS5vcHRpb25zLmxvY2FsU3RvcmFnZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKCRzY29wZS5vcHRpb25zLmxvY2FsU3RvcmFnZUlnbm9yZVBhZ2VTaXplKSkge1xuICAgICAgICAgICRzY29wZS5vcHRpb25zLmxvY2FsU3RvcmFnZUlnbm9yZVBhZ2VTaXplID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoJHNjb3BlLm9wdGlvbnMubG9ja1RhYmxlKSkge1xuICAgICAgICAgICRzY29wZS5vcHRpb25zLmxvY2tUYWJsZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoJHNjb3BlLm9wdGlvbnMuc2VsZWN0YWJsZSkpIHtcbiAgICAgICAgICAkc2NvcGUub3B0aW9ucy5zZWxlY3RhYmxlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoJHNjb3BlLm9wdGlvbnMubXVsdGlTZWxlY3QpKSB7XG4gICAgICAgICAgJHNjb3BlLm9wdGlvbnMubXVsdGlTZWxlY3QgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZCgkc2NvcGUub3B0aW9ucy5zY29wZSkpIHtcbiAgICAgICAgICAkc2NvcGUub3B0aW9ucy5zY29wZSA9ICRzY29wZTtcbiAgICAgICAgfVxuICAgICAgICAkc2NvcGUuc2NvcGUgPSAkc2NvcGUub3B0aW9ucy5zY29wZTtcblxuICAgICAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZCgkc2NvcGUub3B0aW9ucy5zaG93U2VhcmNoKSkge1xuICAgICAgICAgICRzY29wZS5vcHRpb25zLnNob3dTZWFyY2ggPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKCRzY29wZS5vcHRpb25zLnNob3dGb290ZXIpKSB7XG4gICAgICAgICAgJHNjb3BlLm9wdGlvbnMuc2hvd0Zvb3RlciA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoJHNjb3BlLm9wdGlvbnMuc2hvd0V4cG9ydEJ1dHRvbikpIHtcbiAgICAgICAgICAkc2NvcGUub3B0aW9ucy5zaG93RXhwb3J0QnV0dG9uID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZCgkc2NvcGUub3B0aW9ucy5uYW1lKSkge1xuICAgICAgICAgICRzY29wZS5vcHRpb25zLm5hbWUgPSAkc3RhdGUuY3VycmVudC5uYW1lO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKCRzY29wZS5vcHRpb25zLnNjcm9sbEhvcml6b250YWwpKSB7XG4gICAgICAgICAgJHNjb3BlLm9wdGlvbnMuc2Nyb2xsSG9yaXpvbnRhbCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgXy5mb3JFYWNoKCRzY29wZS5vcHRpb25zLmNvbHVtbnMsIGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoYy53aWR0aCkpIHtcbiAgICAgICAgICAgIGMud2lkdGggPSAnYXV0byc7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKGMuc29ydGFibGUpKSB7XG4gICAgICAgICAgICBjLnNvcnRhYmxlID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoYy5uYW1lKSAmJiBhbmd1bGFyLmlzVW5kZWZpbmVkKGMuZmllbGQpKSB7XG4gICAgICAgICAgICB0aHJvdyAnYnNncmlkOiBOYW1lIGlzIHJlcXVpcmVkIGlmIG5vIGZpZWxkIGlzIHByb3ZpZGVkLic7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKGMudmlzaWJsZSkpIHtcbiAgICAgICAgICAgIGMudmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgICRzY29wZS5sb2NhbFN0b3JhZ2VOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJ2JzR3JpZC0nICsgJHNjb3BlLm9wdGlvbnMubmFtZTtcbiAgICAgIH07XG5cbiAgICAgIC8vQ2hlY2sgbG9jYWwgc3RvcmFnZSBmb3Igc2F2ZWQgc2V0dGluZ3NcbiAgICAgICRzY29wZS5nZXRMb2NhbFN0b3JhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghJHNjb3BlLm9wdGlvbnMubG9jYWxTdG9yYWdlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRhdGEgPSBsb2NhbFN0b3JhZ2VTZXJ2aWNlLmdldCgkc2NvcGUubG9jYWxTdG9yYWdlTmFtZSgpKTtcbiAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoZGF0YS5wYWdlU2l6ZSkgJiYgISRzY29wZS5vcHRpb25zLmxvY2FsU3RvcmFnZUlnbm9yZVBhZ2VTaXplKSB7XG4gICAgICAgICAgICAkc2NvcGUub3B0aW9ucy5wYWdlU2l6ZSA9IGRhdGEucGFnZVNpemU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChkYXRhLmNvbHVtbnMpKSB7XG4gICAgICAgICAgICAvLyBkb24ndCB0YWtlIGFsbCBpbmZvLCB3ZSBqdXN0IHdhbnQgdGhlIHZpc2FibGUgY29sdW1ucywgb3JkZXIsIHJldmVyc2UsIGFuZCB3aGljaCBpcyBzb3J0ZWQgZnJvbSBsb2NhbFN0b3JhZ2VcbiAgICAgICAgICAgIHZhciBpc1NvcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgXy5mb3JFYWNoKGRhdGEuY29sdW1ucywgZnVuY3Rpb24gKGMsIGkpIHtcbiAgICAgICAgICAgICAgdmFyIGluZGV4ID0gXy5maW5kSW5kZXgoJHNjb3BlLm9wdGlvbnMuY29sdW1ucywge25hbWU6IGMubmFtZX0pO1xuICAgICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgIGlmIChpICE9PSBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgdmFyIHRtcCA9ICRzY29wZS5vcHRpb25zLmNvbHVtbnNbaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgJHNjb3BlLm9wdGlvbnMuY29sdW1uc1tpbmRleF0gPSAkc2NvcGUub3B0aW9ucy5jb2x1bW5zW2ldO1xuICAgICAgICAgICAgICAgICAgJHNjb3BlLm9wdGlvbnMuY29sdW1uc1tpXSA9IHRtcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLm9wdGlvbnMuY29sdW1uc1tpXS52aXNpYmxlID0gYy52aXNpYmxlO1xuICAgICAgICAgICAgICAgICRzY29wZS5vcHRpb25zLmNvbHVtbnNbaV0uc29ydGVkID0gYy5zb3J0ZWQ7XG4gICAgICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGMucmV2ZXJzZSkpIHtcbiAgICAgICAgICAgICAgICAgICRzY29wZS5vcHRpb25zLmNvbHVtbnNbaV0ucmV2ZXJzZSA9IGMucmV2ZXJzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGMuc29ydGVkKSB7XG4gICAgICAgICAgICAgICAgICBpc1NvcnRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvL2lmIG5vdGhpbmcgaXMgc29ydGVkLCBzb3J0IHRoZSBmaXJzdCBjb2x1bW5cbiAgICAgICAgICAgIGlmICghaXNTb3J0ZWQpIHtcbiAgICAgICAgICAgICAgJHNjb3BlLm9wdGlvbnMuY29sdW1uc1swXS5zb3J0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgJHNjb3BlLmhpZGVDb2x1bW4gPSBmdW5jdGlvbiAoYykge1xuICAgICAgICBjLnZpc2libGUgPSAhYy52aXNpYmxlO1xuICAgICAgICAkc2NvcGUuc2V0TG9jYWxTdG9yYWdlKCk7XG4gICAgICB9O1xuXG4gICAgICAvL3NhdmVzIHNldHRpbmdzIHRvIGxvY2FsIHN0b3JhZ2VcbiAgICAgICRzY29wZS5zZXRMb2NhbFN0b3JhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghJHNjb3BlLm9wdGlvbnMubG9jYWxTdG9yYWdlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbG9jYWxTdG9yYWdlU2VydmljZS5zZXQoJHNjb3BlLmxvY2FsU3RvcmFnZU5hbWUoKSwge1xuICAgICAgICAgIHBhZ2VTaXplOiAkc2NvcGUub3B0aW9ucy5wYWdlU2l6ZSxcbiAgICAgICAgICBjb2x1bW5zOiAkc2NvcGUub3B0aW9ucy5jb2x1bW5zXG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgJHNjb3BlLm9uRHJvcENvbXBsZXRlID0gZnVuY3Rpb24gKGluZGV4LCBvYmopIHtcbiAgICAgICAgLy9vYmogaXMgdGhlIGNvbHVtbiB0aGF0IHdhcyBtb3ZlZCwgaW5kZXggaXMgdGhlIGNvbHVtbiBpbmRleCB0aGF0IG9iaiB3YXMgZHJvcHBlZCBvbnRvLlxuICAgICAgICB2YXIgb3RoZXJJbmRleCA9ICRzY29wZS5vcHRpb25zLmNvbHVtbnMuaW5kZXhPZihvYmopO1xuICAgICAgICAkc2NvcGUub3B0aW9ucy5jb2x1bW5zLnNwbGljZShvdGhlckluZGV4LCAxKTtcbiAgICAgICAgJHNjb3BlLm9wdGlvbnMuY29sdW1ucy5zcGxpY2UoaW5kZXgsIDAsIG9iaik7XG4gICAgICAgICRzY29wZS5zZXRMb2NhbFN0b3JhZ2UoKTtcbiAgICAgIH07XG5cbiAgICAgICRzY29wZS5zZXRXYXRjaGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvL3dhdGNoIHBhZ2VTaXplXG4gICAgICAgICRzY29wZS4kd2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiAkc2NvcGUub3B0aW9ucy5wYWdlU2l6ZTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICRzY29wZS5zZXRMb2NhbFN0b3JhZ2UoKTtcbiAgICAgICAgICAkc2NvcGUub3B0aW9ucy5jdXJyZW50UGFnZSA9IDE7XG4gICAgICAgICAgJHNjb3BlLmdldFBhZ2UoKTtcbiAgICAgICAgfSwgdHJ1ZSk7XG5cbiAgICAgICAgLy93YXRjaCBpdGVtc1xuICAgICAgICAkc2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gJHNjb3BlLm9wdGlvbnMuaXRlbXM7XG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAvL2NoZWNrIHRoYXQgbm8gaXRlbXMgaW4gc2VsZWN0ZWQgaGF2ZSBiZWVuIHJlbW92ZWRcbiAgICAgICAgICB2YXIgbmV3U2VsZWN0ZWQgPSBbXTtcbiAgICAgICAgICBfLmZvckVhY2goJHNjb3BlLm9wdGlvbnMuc2VsZWN0ZWRJdGVtcywgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IF8oJHNjb3BlLm9wdGlvbnMuaXRlbXMpLmluZGV4T2YoaXRlbSk7XG4gICAgICAgICAgICAvL2lmIHRoZSBjdXJyZW50IHNlbGVjdGVkIGl0ZW0gaXMgTk9UIGluIHRoZSBtYXN0ZXIgaXRlbXMgbGlzdCwgc2F2ZSBpdC5cbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgLy9zYXZlIHRoZSBpdGVtIHNvIGl0IGNhbiBiZSByZW1vdmVkIGZyb20gdGhlIHNlbGVjdGVkSXRlbXMgbGlzdFxuICAgICAgICAgICAgICBuZXdTZWxlY3RlZC5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8vUmVtb3ZlIGVhY2ggc2F2ZWQgaXRlbSBmcm9tIHRoZSBzZWxlY3RlZCBJdGVtcyBsaXN0IHVubGVzcyB0aGVyZSBpcyBhbiBpdGVtIHdpdGggdGhlIHNhbWUgaWRcbiAgICAgICAgICBfLmZvckVhY2gobmV3U2VsZWN0ZWQsIGZ1bmN0aW9uIChpdGVtKSB7XG5cbiAgICAgICAgICAgIHZhciBtYXRjaGVzID0gbnVsbDtcbiAgICAgICAgICAgIHZhciBtYXRjaCA9IG51bGw7XG5cbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZXJlIGlzIGFuIGl0ZW0gd2l0aCB0aGUgc2FtZSBpZCwgaWYgdGhlcmUgaXMgYWRkIGl0IHRvIHNlbGVjdGVkIGl0ZW1zLFxuICAgICAgICAgICAgLy8gYXNzdW1pbmcgaXQgd2FzIGp1c3QgdXBkYXRlZCBhbmQgd2Ugc3RpbGwgd2FudCBpdCBzZWxlY3RlZFxuXG4gICAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoaXRlbS5pZCkpIHtcbiAgICAgICAgICAgICAgbWF0Y2hlcyA9IF8ud2hlcmUoJHNjb3BlLm9wdGlvbnMuaXRlbXMsIHsnaWQnOiBpdGVtLmlkfSk7XG4gICAgICAgICAgICAgIGlmIChtYXRjaGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIG1hdGNoID0gbWF0Y2hlc1swXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNJbmRleCA9IF8uaW5kZXhPZigkc2NvcGUub3B0aW9ucy5zZWxlY3RlZEl0ZW1zLCBpdGVtKTtcbiAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAkc2NvcGUub3B0aW9ucy5zZWxlY3RlZEl0ZW1zLnNwbGljZShzSW5kZXgsIDEsIG1hdGNoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAkc2NvcGUub3B0aW9ucy5zZWxlY3RlZEl0ZW1zLnNwbGljZShzSW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgJHNjb3BlLnN0YXJ0KCk7XG4gICAgICAgIH0sIHRydWUpO1xuICAgICAgfTtcblxuICAgICAgLy9VcGRhdGVzIHRoZSBjdXJyZW50IGRpc3BsYXllZCBpdGVtcyBhbmQgc2hvd2luZyBpbmZvXG4gICAgICAkc2NvcGUuZ2V0UGFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGJlZ2luID0gKCgkc2NvcGUub3B0aW9ucy5jdXJyZW50UGFnZSAtIDEpICogJHNjb3BlLm9wdGlvbnMucGFnZVNpemUpO1xuICAgICAgICB2YXIgZW5kID0gYmVnaW4gKyAkc2NvcGUub3B0aW9ucy5wYWdlU2l6ZTtcbiAgICAgICAgJHNjb3BlLmRpc3BsYXllZEl0ZW1zID0gJHNjb3BlLmZpbHRlcmVkSXRlbXMuc2xpY2UoYmVnaW4sIGVuZCk7XG5cbiAgICAgICAgLy91cGRhdGUgc2hvd2luZyBpbmZvXG4gICAgICAgIGlmICgkc2NvcGUuZGlzcGxheWVkSXRlbXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgJHNjb3BlLnNob3dpbmcuYmVnaW4gPSBiZWdpbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAkc2NvcGUuc2hvd2luZy5iZWdpbiA9IGJlZ2luICsgMTtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5zaG93aW5nLmVuZCA9IGJlZ2luICsgJHNjb3BlLmRpc3BsYXllZEl0ZW1zLmxlbmd0aDtcbiAgICAgICAgJHNjb3BlLnNob3dpbmcub2YgPSAkc2NvcGUuZmlsdGVyZWRJdGVtcy5sZW5ndGg7XG4gICAgICB9O1xuXG4gICAgICAvL3NvcnQgYWxsIHRoZSBpdGVtcyBieSBhIGNvbHVtblxuICAgICAgJHNjb3BlLnNvcnQgPSBmdW5jdGlvbiAoY29sLCBjaGFuZ2VSZXZlcnNlKSB7XG4gICAgICAgIC8vZXhpdCBpZiB3ZSBjYW50IHNvcnQgdGhpcyBjb2x1bW5cbiAgICAgICAgaWYgKGNvbC5zb3J0YWJsZSAhPT0gdHJ1ZSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vdW5zb3J0IHRoZSByZXN0XG4gICAgICAgIF8uZm9yRWFjaCgkc2NvcGUub3B0aW9ucy5jb2x1bW5zLCBmdW5jdGlvbiAoYykge1xuICAgICAgICAgIGlmIChjICE9PSBjb2wpIHtcbiAgICAgICAgICAgIGMuc29ydGVkID0gZmFsc2U7XG4gICAgICAgICAgICBjLnJldmVyc2UgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vaWYgaXQgd2FzIGFscmVhZHkgc29ydGVkIGFuZCByZXZlcnNlIHdhcyBub3Qgc2V0LCByZXZlcnNlIGl0XG4gICAgICAgIGNvbC5zb3J0ZWQgPSB0cnVlO1xuICAgICAgICBpZiAoY2hhbmdlUmV2ZXJzZSkge1xuICAgICAgICAgIGNvbC5yZXZlcnNlID0gIWNvbC5yZXZlcnNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGZpbHRlciA9ICRmaWx0ZXIoJ29yZGVyQnknKTtcbiAgICAgICAgJHNjb3BlLmZpbHRlcmVkSXRlbXMgPSBmaWx0ZXIoJHNjb3BlLmZpbHRlcmVkSXRlbXMsIGNvbC5maWVsZCwgY29sLnJldmVyc2UpO1xuICAgICAgICAkc2NvcGUuZ2V0UGFnZSgpO1xuXG4gICAgICAgICRzY29wZS5zZXRMb2NhbFN0b3JhZ2UoKTtcbiAgICAgIH07XG5cbiAgICAgIC8vZmlsdGVyIHRoZSBpdGVtcyBiYXNlZCBvbiB0aGUgc2VhcmNoIGZpbHRlclxuICAgICAgJHNjb3BlLmZpbHRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZpbHRlciA9ICRmaWx0ZXIoJ2ZpbHRlcicpO1xuICAgICAgICAkc2NvcGUuZmlsdGVyZWRJdGVtcyA9IGZpbHRlcigkc2NvcGUub3B0aW9ucy5pdGVtcywgJHNjb3BlLm9wdGlvbnMuc2VhcmNoRmlsdGVyKTtcbiAgICAgICAgJHNjb3BlLmdldFBhZ2UoKTtcbiAgICAgIH07XG5cbiAgICAgICRzY29wZS5zZWxlY3RJdGVtID0gZnVuY3Rpb24gKGl0ZW0pIHtcblxuICAgICAgICBpZiAoISRzY29wZS5vcHRpb25zLnNlbGVjdGFibGUpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaW5kZXggPSBfLmluZGV4T2YoJHNjb3BlLm9wdGlvbnMuc2VsZWN0ZWRJdGVtcywgaXRlbSk7XG4gICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAkc2NvcGUub3B0aW9ucy5zZWxlY3RlZEl0ZW1zLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghJHNjb3BlLm9wdGlvbnMubXVsdGlTZWxlY3QgJiYgJHNjb3BlLm9wdGlvbnMuc2VsZWN0ZWRJdGVtcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAkc2NvcGUub3B0aW9ucy5zZWxlY3RlZEl0ZW1zLnNwbGljZSgwLCAxKTtcbiAgICAgICAgfVxuICAgICAgICAkc2NvcGUub3B0aW9ucy5zZWxlY3RlZEl0ZW1zLnB1c2goaXRlbSk7XG4gICAgICB9O1xuXG4gICAgICAvL3N0b3BzIHRoZSBjbGljayBmcm9tIGdvaW5nIHRvIHRoZSByb3cgYW5kIHN3aXRjaGluZyBpdCBhIHNlY29uZCB0aW1lXG4gICAgICAkc2NvcGUuc2VsZWN0SXRlbUNoZWNrYm94ID0gZnVuY3Rpb24gKCRldmVudCwgaXRlbSkge1xuICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICRzY29wZS5zZWxlY3RJdGVtKGl0ZW0pO1xuICAgICAgfTtcblxuICAgICAgJHNjb3BlLmlzU2VsZWN0ZWRJdGVtID0gZnVuY3Rpb24gKGl0ZW0pIHtcblxuICAgICAgICB2YXIgaW5kZXggPSBfLmluZGV4T2YoJHNjb3BlLm9wdGlvbnMuc2VsZWN0ZWRJdGVtcywgaXRlbSk7XG4gICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9O1xuXG4gICAgICAkc2NvcGUudG9nZ2xlU2VsZWN0QWxsID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgIF8uZm9yRWFjaCgkc2NvcGUuZmlsdGVyZWRJdGVtcywgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIGlmICghJHNjb3BlLmlzU2VsZWN0ZWRJdGVtKGl0ZW0pKSB7XG4gICAgICAgICAgICAgICRzY29wZS5zZWxlY3RJdGVtKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIF8uZm9yRWFjaCgkc2NvcGUuZmlsdGVyZWRJdGVtcywgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIGlmICgkc2NvcGUuaXNTZWxlY3RlZEl0ZW0oaXRlbSkpIHtcbiAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdEl0ZW0oaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vbG9ja3MgdGhlIHRhYmxlLCBnb3QgdGhlIGlkZWEgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vdHVybi9hbmd1bGFyLWxvY2stY29sdW1uLXdpZHRoc1xuICAgICAgLy9maXhzIGEgcHJvYmxlbSB3aGVyZSBhdXRvIHNpemUgY2hhbmdlcyBmcm9tIHBhZ2UgdG8gcGFnZVxuICAgICAgJHNjb3BlLmxvY2tUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCEkc2NvcGUub3B0aW9ucy5sb2NrVGFibGUpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvL3dhaXQgZm9yIGRvbSB0byByZW5kZXIgc28gd2UgY2FuIGZpbmQgdGhlIHRoc1xuICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIHRocyA9IGFuZ3VsYXIuZWxlbWVudCgkZWxlbWVudCkuZmluZCgnZGl2IHRhYmxlIHRoZWFkIHRyIHRoJyk7XG5cbiAgICAgICAgICAvLyBnb2luZyB0byBhc3N1bWUgZWFjaCBlbGVtZW50IGlzIGluIHRoZSBzYW1lIG9yZGVyIGFzIGNvbHVtZXMsIGlmIHRoZXkgYXJlIHNldCB0byBhdXRvLCB3ZSBhcmVcbiAgICAgICAgICAvLyBnb2luZyB0byBoYXJkIGNvZGUgdGhlcmUgd2lkdGhcbiAgICAgICAgICB2YXIgaSA9IDA7XG5cbiAgICAgICAgICBfLmZvckVhY2godGhzLCBmdW5jdGlvbiAodGgpIHtcbiAgICAgICAgICAgIHZhciBlID0gYW5ndWxhci5lbGVtZW50KHRoKTtcblxuICAgICAgICAgICAgaWYgKCRzY29wZS5vcHRpb25zLnNlbGVjdGFibGUgJiYgaSA9PT0gMCkgeyAvL3NraXAgdGhlIGZpcnN0IHRoLCBhbmQgcmVzZXQgaTtcbiAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoJHNjb3BlLm9wdGlvbnMuY29sdW1uc1tpXS53aWR0aCA9PT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChlKS5jc3MoJ3dpZHRoJywgdGgub2Zmc2V0V2lkdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy9ub3cgbG9jayB0aGUgdGFibGUgc28gaXQgZG9lc24ndCBjaGFuZ2VcbiAgICAgICAgICB2YXIgdGFibGUgPSBhbmd1bGFyLmVsZW1lbnQoJGVsZW1lbnQpLmZpbmQoJ2RpdiB0YWJsZScpO1xuICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCh0YWJsZSkuY3NzKCd0YWJsZS1sYXlvdXQnLCAnZml4ZWQnKTtcbiAgICAgICAgfSwgMCk7XG4gICAgICB9O1xuXG4gICAgICAvL2V2ZXJ5dGhpbmcgaXMgc2V0dXAsIGZpbGxlciBhbmQgc29ydFxuICAgICAgJHNjb3BlLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIGlmICgkc2NvcGUub3B0aW9ucy5zZWFyY2hGaWx0ZXIgIT09ICcnKSB7XG4gICAgICAgICAgJHNjb3BlLmZpbHRlcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGNvbCA9IF8uZmluZCgkc2NvcGUub3B0aW9ucy5jb2x1bW5zLCAnc29ydGVkJyk7XG4gICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChjb2wpKSB7XG4gICAgICAgICAgJHNjb3BlLnNvcnQoY29sLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgJHNjb3BlLmdldFBhZ2UoKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgJHNjb3BlLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS5zZXRVbmRlZmluZWQoKTtcbiAgICAgICAgJHNjb3BlLmdldExvY2FsU3RvcmFnZSgpO1xuICAgICAgICAkc2NvcGUuc2V0V2F0Y2hlcygpO1xuICAgICAgICAkc2NvcGUubG9ja1RhYmxlKCk7XG5cbiAgICAgICAgJHNjb3BlLnN0YXJ0KCk7XG4gICAgICB9O1xuICAgICAgJHNjb3BlLmluaXQoKTtcblxuICAgICAgLy8gKioqKioqKiBFeHBvcnQ6ICoqKioqKipcblxuICAgICAgJHNjb3BlLmV4cG9ydFR5cGVzID0ge1xuICAgICAgICBGSUxURVJFRDogMCxcbiAgICAgICAgU0VMRUNURUQ6IDEsXG4gICAgICAgIEFMTDogMlxuICAgICAgfTtcblxuXG4gICAgICAkc2NvcGUuR2V0Um93c0ZvckV4cG9ydCA9IGZ1bmN0aW9uIChleHBvcnRUeXBlLCBmaWVsZE5hbWVzLCBjc3ZEYXRhKSB7XG5cbiAgICAgICAgdmFyIGl0ZW1JbmRleCA9IDA7XG4gICAgICAgIHZhciBjdXJDZWxsUmF3ID0gJyc7XG4gICAgICAgIHZhciBpdGVtc1RvRXhwb3J0ID0gW107XG5cbiAgICAgICAgLy8gV2hhdCBpdGVtcyB3ZSBhcmUgaW1wb3J0aW5nP1xuICAgICAgICBzd2l0Y2ggKGV4cG9ydFR5cGUpIHtcbiAgICAgICAgICBjYXNlICRzY29wZS5leHBvcnRUeXBlcy5GSUxURVJFRDpcbiAgICAgICAgICAgIGl0ZW1zVG9FeHBvcnQgPSAkc2NvcGUuZGlzcGxheWVkSXRlbXM7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICRzY29wZS5leHBvcnRUeXBlcy5TRUxFQ1RFRDpcbiAgICAgICAgICAgIGl0ZW1zVG9FeHBvcnQgPSAkc2NvcGUub3B0aW9ucy5zZWxlY3RlZEl0ZW1zO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAkc2NvcGUuZXhwb3J0VHlwZXMuQUxMOlxuICAgICAgICAgICAgaXRlbXNUb0V4cG9ydCA9ICRzY29wZS5vcHRpb25zLml0ZW1zO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHbyB0aHJvdWdoIGV2ZXJ5IGl0ZW1cbiAgICAgICAgXy5lYWNoKGl0ZW1zVG9FeHBvcnQsIGZ1bmN0aW9uIChpdGVtVG9FeHBvcnQpIHtcblxuICAgICAgICAgIC8vIEdvIHRocm91Z2ggZmllbGRzXG4gICAgICAgICAgXy5lYWNoKGZpZWxkTmFtZXMsIGZ1bmN0aW9uIChmaWVsZE5hbWUpIHtcblxuICAgICAgICAgICAgLy8gSXMgZmllbGQgbmFtZSBkZWZpbmVkP1xuICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGl0ZW1Ub0V4cG9ydFtmaWVsZE5hbWVdKSkge1xuICAgICAgICAgICAgICBjdXJDZWxsUmF3ID0gaXRlbVRvRXhwb3J0W2ZpZWxkTmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChhbmd1bGFyLmlzRGVmaW5lZChpdGVtVG9FeHBvcnQuc2VhcmNoKSAmJiBhbmd1bGFyLmlzRGVmaW5lZChpdGVtVG9FeHBvcnQuc2VhcmNoW2ZpZWxkTmFtZV0pKSB7XG4gICAgICAgICAgICAgIC8vIFllcywgc28gZ2V0IHRoZSBjZWxsIHZhbHVlXG4gICAgICAgICAgICAgIGN1ckNlbGxSYXcgPSBpdGVtVG9FeHBvcnQuc2VhcmNoW2ZpZWxkTmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gVE9ETzogU2hvdWxkbid0IHJlYWNoIHRoaXMsIHRoaXMgaGFwcGVucyB3aGVuIGEgbW9kZWwgZGlyZWN0aXZlIGlzbid0IGxvYWRlZCBkdWUgdG8gcGFnaW5nXG4gICAgICAgICAgICAgIGN1ckNlbGxSYXcgPSAnJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY3N2RGF0YSArPSAnXCInICsgJHNjb3BlLmNzdlN0cmluZ2lmeShjdXJDZWxsUmF3KSArICdcIiwnOyAgIC8vIENyZWF0ZXMgYSBuZXcgcm93IGluIENTVlxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY3N2RGF0YSA9ICRzY29wZS5zd2FwTGFzdENvbW1hRm9yTmV3bGluZShjc3ZEYXRhKTtcbiAgICAgICAgICBpdGVtSW5kZXgrKztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGNzdkRhdGE7XG4gICAgICB9O1xuXG4gICAgICAvLyBDbGVhbiB1cCB0aGUgc3RyaW5nLlxuICAgICAgJHNjb3BlLmNzdlN0cmluZ2lmeSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgaWYgKHN0ciA9PT0gbnVsbCB8fCBhbmd1bGFyLmlzVW5kZWZpbmVkKHN0cikpIHtcbiAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNOdW1iZXIoc3RyKSkge1xuICAgICAgICAgIHJldHVybiAnJyArIHN0cjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYW5ndWxhci5pc0Jvb2xlYW4oc3RyKSkge1xuICAgICAgICAgIHJldHVybiAoc3RyID8gJ1RydWUnIDogJ0ZhbHNlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNTdHJpbmcoc3RyKSkge1xuICAgICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvXCIvZywgJ1wiXCInKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhbmd1bGFyLnRvSnNvbiggc3RyICkucmVwbGFjZSgvXCIvZywgJ1wiXCInKTtcbiAgICAgIH07XG5cblxuICAgICAgLy8gRGVsZXRlIGxhc3QgY29tbWEgZnJvbSBDU1Ygc3RyaW5nLlxuICAgICAgJHNjb3BlLnN3YXBMYXN0Q29tbWFGb3JOZXdsaW5lID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICB2YXIgbmV3U3RyID0gc3RyLnN1YnN0cigwLCBzdHIubGVuZ3RoIC0gMSk7XG4gICAgICAgIHJldHVybiBuZXdTdHIgKyAnXFxuJztcbiAgICAgIH07XG5cblxuICAgICAgLy8gQ3JlYXRlIGEgZG93bmxvYWRhYmxlIGxpbmsgYW5kIGNsaWNrIGl0LlxuICAgICAgJHNjb3BlLlN1Ym1pdEZpbGVUb1VzZXIgPSBmdW5jdGlvbiAoY3N2RGF0YSkge1xuICAgICAgICB2YXIgZWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudCgnPGEvPicpO1xuICAgICAgICBlbGVtZW50LmF0dHIoe1xuICAgICAgICAgIGhyZWY6ICdkYXRhOmF0dGFjaG1lbnQvY3N2O2NoYXJzZXQ9dXRmLTgsJyArIGVuY29kZVVSSShjc3ZEYXRhKSxcbiAgICAgICAgICB0YXJnZXQ6ICdfYmxhbmsnLFxuICAgICAgICAgIGRvd25sb2FkOiAnZXhwb3J0LmNzdidcbiAgICAgICAgfSlbMF0uY2xpY2soKTtcbiAgICAgIH07XG5cblxuICAgICAgJHNjb3BlLkV4cG9ydCA9IGZ1bmN0aW9uIChleHBvcnRUeXBlKSB7XG5cbiAgICAgICAgdmFyIGZpZWxkTmFtZXMgPSBbXTtcbiAgICAgICAgdmFyIGNzdkRhdGEgPSAnJztcbiAgICAgICAgdmFyIHJlcXVlc3RzID0gW107XG5cblxuICAgICAgICAvLyBHZXQgY29sdW1uIG5hbWVzIGZvciBkaXNwbGF5aW5nIGluIGEgcmVwb3J0IGFuZCBuYW1lcyBvZiBhbGwgZmllbGRzXG4gICAgICAgIF8uZWFjaCgkc2NvcGUub3B0aW9ucy5jb2x1bW5zLCBmdW5jdGlvbiAoYykge1xuICAgICAgICAgIGZpZWxkTmFtZXMucHVzaChjLmZpZWxkKTtcbiAgICAgICAgICByZXF1ZXN0cy5wdXNoKGMubmFtZSk7XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgaGVhZGVyIGZvciBDU1YgRXhwb3J0XG4gICAgICAgIF8uZWFjaChyZXF1ZXN0cywgZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICBjc3ZEYXRhICs9ICdcIicgKyAkc2NvcGUuY3N2U3RyaW5naWZ5KHYpICsgJ1wiLCc7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgY3N2RGF0YSA9ICRzY29wZS5zd2FwTGFzdENvbW1hRm9yTmV3bGluZShjc3ZEYXRhKTtcbiAgICAgICAgY3N2RGF0YSA9ICRzY29wZS5HZXRSb3dzRm9yRXhwb3J0KGV4cG9ydFR5cGUsIGZpZWxkTmFtZXMsIGNzdkRhdGEpO1xuXG4gICAgICAgIC8vIFNlbmQgaXQgdG8gdXNlclxuICAgICAgICAkc2NvcGUuU3VibWl0RmlsZVRvVXNlcihjc3ZEYXRhKTtcblxuICAgICAgfTtcbiAgICB9XG4gIH07XG59KTtcbi8vKioqKioqKioqKiBFeHBvcnRzIGVuZHMgaGVyZSAqKioqKioqKioqXG5cblxuLy8gc291Y2UgZnJvbSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE0ODQ2ODM2L2luc2VydC1hbi1hbmd1bGFyLWpzLXRlbXBsYXRlLXN0cmluZy1pbnNpZGUtYW4tZWxlbWVudFxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmRpcmVjdGl2ZSgnYnNHcmlkQ2VsbFRlbXBsYXRlJywgZnVuY3Rpb24gKCRjb21waWxlKSB7XG4gIHJldHVybiB7XG4gICAgc2NvcGU6IHRydWUsXG4gICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgdmFyIGVsO1xuXG4gICAgICBhdHRycy4kb2JzZXJ2ZSgnYnNHcmlkQ2VsbFRlbXBsYXRlJywgZnVuY3Rpb24gKHRwbCkge1xuICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQodHBsKSkge1xuICAgICAgICAgIC8vIGNvbXBpbGUgdGhlIHByb3ZpZGVkIHRlbXBsYXRlIGFnYWluc3QgdGhlIGN1cnJlbnQgc2NvcGVcbiAgICAgICAgICBlbCA9ICRjb21waWxlKHRwbCkoc2NvcGUpO1xuXG4gICAgICAgICAgLy8gc3R1cGlkIHdheSBvZiBlbXB0eWluZyB0aGUgZWxlbWVudFxuICAgICAgICAgIGVsZW1lbnQuaHRtbCgnJyk7XG5cbiAgICAgICAgICAvLyBhZGQgdGhlIHRlbXBsYXRlIGNvbnRlbnRcbiAgICAgICAgICBlbGVtZW50LmFwcGVuZChlbCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn0pO1xuXG4iLCIndXNlIHN0cmljdCc7XG5cbi8vIEZvdW5kIHJlZmVyZW5jZSBmb3Igc29ydCBhdCBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE3MTU1ODU2L2FuZ3VsYXJqcy1uZy1yZXBlYXQtb3JkZXJieS1vcmRlcnMtbnVtYmVycy1pbmNvcnJlY3RseVxuLy8gdXNlZCBvcmRlckJ5IHNvdXJjZSBmb3IgZXhhbXBsZSBhdCBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2Jsb2IvbWFzdGVyL3NyYy9uZy9maWx0ZXIvb3JkZXJCeS5qcyNMM1xuXG5hbmd1bGFyLm1vZHVsZSgnYnNncmlkJykuZmlsdGVyKCduYXR1cmFsU29ydEJ5JyxmdW5jdGlvbigkcGFyc2Upe1xuICAgIGZ1bmN0aW9uIG5hdHVyYWxTb3J0IChhLCBiKSB7XG4gICAgICAgIHZhciByZSA9IC8oXi0/WzAtOV0rKFxcLj9bMC05XSopW2RmXT9lP1swLTldPyR8XjB4WzAtOWEtZl0rJHxbMC05XSspL2dpLFxuICAgICAgICAgICAgc3JlID0gLyheWyBdKnxbIF0qJCkvZyxcbiAgICAgICAgICAgIGRyZSA9IC8oXihbXFx3IF0rLD9bXFx3IF0rKT9bXFx3IF0rLD9bXFx3IF0rXFxkKzpcXGQrKDpcXGQrKT9bXFx3IF0/fF5cXGR7MSw0fVtcXC9cXC1dXFxkezEsNH1bXFwvXFwtXVxcZHsxLDR9fF5cXHcrLCBcXHcrIFxcZCssIFxcZHs0fSkvLFxuICAgICAgICAgICAgaHJlID0gL14weFswLTlhLWZdKyQvaSxcbiAgICAgICAgICAgIG9yZSA9IC9eMC8sXG4gICAgICAgICAgICBpID0gZnVuY3Rpb24ocykgeyByZXR1cm4gbmF0dXJhbFNvcnQuaW5zZW5zaXRpdmUgJiYgKCcnK3MpLnRvTG93ZXJDYXNlKCkgfHwgJycrcyB9LFxuICAgICAgICAvLyBjb252ZXJ0IGFsbCB0byBzdHJpbmdzIHN0cmlwIHdoaXRlc3BhY2VcbiAgICAgICAgICAgIHggPSBpKGEpLnJlcGxhY2Uoc3JlLCAnJykgfHwgJycsXG4gICAgICAgICAgICB5ID0gaShiKS5yZXBsYWNlKHNyZSwgJycpIHx8ICcnLFxuICAgICAgICAvLyBjaHVuay90b2tlbml6ZVxuICAgICAgICAgICAgeE4gPSB4LnJlcGxhY2UocmUsICdcXDAkMVxcMCcpLnJlcGxhY2UoL1xcMCQvLCcnKS5yZXBsYWNlKC9eXFwwLywnJykuc3BsaXQoJ1xcMCcpLFxuICAgICAgICAgICAgeU4gPSB5LnJlcGxhY2UocmUsICdcXDAkMVxcMCcpLnJlcGxhY2UoL1xcMCQvLCcnKS5yZXBsYWNlKC9eXFwwLywnJykuc3BsaXQoJ1xcMCcpLFxuICAgICAgICAvLyBudW1lcmljLCBoZXggb3IgZGF0ZSBkZXRlY3Rpb25cbiAgICAgICAgICAgIHhEID0gcGFyc2VJbnQoeC5tYXRjaChocmUpKSB8fCAoeE4ubGVuZ3RoICE9IDEgJiYgeC5tYXRjaChkcmUpICYmIERhdGUucGFyc2UoeCkpLFxuICAgICAgICAgICAgeUQgPSBwYXJzZUludCh5Lm1hdGNoKGhyZSkpIHx8IHhEICYmIHkubWF0Y2goZHJlKSAmJiBEYXRlLnBhcnNlKHkpIHx8IG51bGwsXG4gICAgICAgICAgICBvRnhOY0wsIG9GeU5jTDtcbiAgICAgICAgLy8gZmlyc3QgdHJ5IGFuZCBzb3J0IEhleCBjb2RlcyBvciBEYXRlc1xuICAgICAgICBpZiAoeUQpXG4gICAgICAgICAgICBpZiAoIHhEIDwgeUQgKSByZXR1cm4gLTE7XG4gICAgICAgICAgICBlbHNlIGlmICggeEQgPiB5RCApIHJldHVybiAxO1xuICAgICAgICAvLyBuYXR1cmFsIHNvcnRpbmcgdGhyb3VnaCBzcGxpdCBudW1lcmljIHN0cmluZ3MgYW5kIGRlZmF1bHQgc3RyaW5nc1xuICAgICAgICBmb3IodmFyIGNMb2M9MCwgbnVtUz1NYXRoLm1heCh4Ti5sZW5ndGgsIHlOLmxlbmd0aCk7IGNMb2MgPCBudW1TOyBjTG9jKyspIHtcbiAgICAgICAgICAgIC8vIGZpbmQgZmxvYXRzIG5vdCBzdGFydGluZyB3aXRoICcwJywgc3RyaW5nIG9yIDAgaWYgbm90IGRlZmluZWQgKENsaW50IFByaWVzdClcbiAgICAgICAgICAgIG9GeE5jTCA9ICEoeE5bY0xvY10gfHwgJycpLm1hdGNoKG9yZSkgJiYgcGFyc2VGbG9hdCh4TltjTG9jXSkgfHwgeE5bY0xvY10gfHwgMDtcbiAgICAgICAgICAgIG9GeU5jTCA9ICEoeU5bY0xvY10gfHwgJycpLm1hdGNoKG9yZSkgJiYgcGFyc2VGbG9hdCh5TltjTG9jXSkgfHwgeU5bY0xvY10gfHwgMDtcbiAgICAgICAgICAgIC8vIGhhbmRsZSBudW1lcmljIHZzIHN0cmluZyBjb21wYXJpc29uIC0gbnVtYmVyIDwgc3RyaW5nIC0gKEt5bGUgQWRhbXMpXG4gICAgICAgICAgICBpZiAoaXNOYU4ob0Z4TmNMKSAhPT0gaXNOYU4ob0Z5TmNMKSkgeyByZXR1cm4gKGlzTmFOKG9GeE5jTCkpID8gMSA6IC0xOyB9XG4gICAgICAgICAgICAvLyByZWx5IG9uIHN0cmluZyBjb21wYXJpc29uIGlmIGRpZmZlcmVudCB0eXBlcyAtIGkuZS4gJzAyJyA8IDIgIT0gJzAyJyA8ICcyJ1xuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG9GeE5jTCAhPT0gdHlwZW9mIG9GeU5jTCkge1xuICAgICAgICAgICAgICAgIG9GeE5jTCArPSAnJztcbiAgICAgICAgICAgICAgICBvRnlOY0wgKz0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob0Z4TmNMIDwgb0Z5TmNMKSByZXR1cm4gLTE7XG4gICAgICAgICAgICBpZiAob0Z4TmNMID4gb0Z5TmNMKSByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGFycmF5LCBzb3J0UHJlZGljYXRlLCByZXZlcnNlT3JkZXIgKSB7XG4gICAgICAgIGlmICghYW5ndWxhci5pc0FycmF5KGFycmF5KSkgcmV0dXJuIGFycmF5O1xuICAgICAgICBpZiAoIXNvcnRQcmVkaWNhdGUpIHJldHVybiBhcnJheTtcbiAgICAgICAgc29ydFByZWRpY2F0ZSA9IGFuZ3VsYXIuaXNBcnJheShzb3J0UHJlZGljYXRlKSA/IHNvcnRQcmVkaWNhdGU6IFtzb3J0UHJlZGljYXRlXTtcbiAgICAgICAgc29ydFByZWRpY2F0ZSA9IF8ubWFwKHNvcnRQcmVkaWNhdGUsIGZ1bmN0aW9uKHByZWRpY2F0ZSl7XG4gICAgICAgICAgICB2YXIgZGVzY2VuZGluZyA9IGZhbHNlLFxuICAgICAgICAgICAgICAgIGdldCA9IHByZWRpY2F0ZSB8fCBhbmd1bGFyLmlkZW50aXR5O1xuICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNTdHJpbmcocHJlZGljYXRlKSkge1xuICAgICAgICAgICAgICAgIGlmICgocHJlZGljYXRlLmNoYXJBdCgwKSA9PSAnKycgfHwgcHJlZGljYXRlLmNoYXJBdCgwKSA9PSAnLScpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlc2NlbmRpbmcgPSBwcmVkaWNhdGUuY2hhckF0KDApID09ICctJztcbiAgICAgICAgICAgICAgICAgICAgcHJlZGljYXRlID0gcHJlZGljYXRlLnN1YnN0cmluZygxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ2V0ID0gJHBhcnNlKHByZWRpY2F0ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGdldC5jb25zdGFudCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gZ2V0KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXZlcnNlQ29tcGFyYXRvcihmdW5jdGlvbihhLGIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYXR1cmFsU29ydChhW2tleV0sIGJba2V5XSk7XG4gICAgICAgICAgICAgICAgICAgIH0sIGRlc2NlbmRpbmcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXZlcnNlQ29tcGFyYXRvcihmdW5jdGlvbihhLGIpe1xuICAgICAgICAgICAgICAgIHJldHVybiBuYXR1cmFsU29ydChnZXQoYSksZ2V0KGIpKTtcbiAgICAgICAgICAgIH0sIGRlc2NlbmRpbmcpO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgYXJyYXlDb3B5ID0gW107XG4gICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7IGFycmF5Q29weS5wdXNoKGFycmF5W2ldKTsgfVxuICAgICAgICByZXR1cm4gYXJyYXlDb3B5LnNvcnQocmV2ZXJzZUNvbXBhcmF0b3IoY29tcGFyYXRvciwgcmV2ZXJzZU9yZGVyKSk7XG5cbiAgICAgICAgZnVuY3Rpb24gY29tcGFyYXRvcihvMSwgbzIpe1xuICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgc29ydFByZWRpY2F0ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBjb21wID0gc29ydFByZWRpY2F0ZVtpXShvMSwgbzIpO1xuICAgICAgICAgICAgICAgIGlmIChjb21wICE9PSAwKSByZXR1cm4gY29tcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHJldmVyc2VDb21wYXJhdG9yKGNvbXAsIGRlc2NlbmRpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBkZXNjZW5kaW5nXG4gICAgICAgICAgICAgICAgPyBmdW5jdGlvbihhLGIpe3JldHVybiBjb21wKGIsYSk7fVxuICAgICAgICAgICAgICAgIDogY29tcDtcbiAgICAgICAgfVxuXG4gICAgfVxufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
