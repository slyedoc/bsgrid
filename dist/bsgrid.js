angular.module("bsgrid.tpls").run(["$templateCache",function(e){e.put("template/bsgrid.html",'<div class="row bs-grid"><div class="col-sm-9"><div uib-dropdown=""><button class="btn btn-default" uib-dropdown-toggle="" ng-class="{ \'btn-sm\': options.pageSizeShow, \'btn-xs\': !options.pageSizeShow }">Options <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li ng-if="options.pageSizeShow" role="presentation" class="dropdown-header">Page Size</li><li ng-if="options.pageSizeShow" ng-repeat="size in options.pageSizeOptions" ng-class="{\'active\': options.pageSize === size }"><a tabindex="-1" ng-click="options.pageSize = size">{{ size }}</a></li><li ng-if="options.pageSizeShow" role="presentation" class="divider"></li><li role="presentation" class="dropdown-header">Columns</li><li ng-repeat="col in options.columns"><a ng-click="hideColumn(col)"><i ng-class="col.visible ? \'glyphicon glyphicon-ok\': \'glyphicon glyphicon-remove\'"></i> <span>{{ col.name }}</span></a></li></ul></div></div><div ng-if="options.showSearch" class="col-sm-3" style="margin-bottom: 10px" ng-class="{ \'col-sm-offset-9\': !options.pageSizeShow }"><div class="input-group input-group-sm"><input type="text" class="form-control" placeholder="Search" ng-model="options.searchFilter" ng-change="filter()" ng-model-options="{ debounce: { \'default\': 400, \'blur\': 0 } }"> <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span></div></div><div class="col-md-12" ng-class="{\'table-responsive\': options.scrollHorizontal}"><table class="table table-striped table-bordered table-hover table-condensed color2"><thead><tr><th ng-if="options.multiSelect" class="bs-grid-select"><input ng-if="options.multiSelect" type="checkbox" ng-model="selectAllToggle" ng-change="toggleSelectAll(selectAllToggle)"></th><th class="bs-grid-overflow" ng-repeat="col in options.columns" ng-click="sort(col, true)" style="width: {{ col.width }};" ng-show="col.visible"><div ng-drop="true" ng-drop-success="onDropComplete($index, $data, $evt)"><div ng-drag="true" ng-drag-data="col"><span>{{ col.name || col.field }}</span> <span ng-if="col.sorted" class="order" ng-class="{\'dropup\': col.reverse }"><span class="caret"></span></span></div></div></th></tr></thead><tbody><tr ng-repeat="item in displayedItems" ng-class="{\'info\' : isSelectedItem( item ) }" ng-click="selectItem(item)"><td ng-if="options.multiSelect"><input type="checkbox" class="bg-grid-checkbox" ng-checked="isSelectedItem(item)" ng-click="selectItemCheckbox($event, item)"></td><td class="bs-grid-overflow" ng-repeat="col in options.columns" ng-show="col.visible"><div ng-if="col.template" bs-grid-cell-template="{{ col.template }}"></div><div ng-if="!col.template" class="bs-grid-column bs-grid-column-{{col.field}}">{{ item[col.field] }}</div></td></tr></tbody></table></div><div ng-if="options.showFooter" class="col-md-12"><div class="col-sm-4"><div class="row"><span ng-if="options.selectedItems.length != 0">Selected <strong class=\'\\"text-primary\\"\'>{{options.selectedItems.length}}</strong></span> <span ng-class="{ \'text-danger\': displayedItems.length == 0}">Showing <strong>{{showing.begin}}</strong> to <strong>{{showing.end}}</strong> of <strong class=\'\\"text-primary\\"\'>{{ showing.of}}</strong> items</span></div><div class="row"><span ng-if="options.searchFilter">(<em>Filtered down from <strong>{{options.items.length}}</strong></em>)</span></div></div><div class="col-sm-8"><uib-pagination class="pagination-sm pull-right color2" boundary-links="true" max-size="9" items-per-page="options.pageSize" total-items="filteredItems.length" ng-model="options.currentPage" ng-change="getPage()" previous-text="Previous" next-text="Next" first-text="First" last-text="Last"></uib-pagination></div></div><div class="col-sm-9" ng-if="options.showExportButton"><div uib-dropdown=""><button class="btn btn-default btn-sm" type="button" uib-dropdown-toggle="">Export <span class=\'\\"caret\\"\'></span></button><ul class="dropdown-menu" role="menu"><li role="presentation" class="dropdown-header"><a tabindex="-1" ng-click="Export(exportTypes.FILTERED)">Filtered</a></li><li role="presentation" class="dropdown-header" ng-if="options.selectedItems[0]"><a ng-click="Export(exportTypes.SELECTED)">Selected</a></li><li role="presentation" class="dropdown-header"><a ng-click="Export(exportTypes.ALL)">All</a></li></ul></div></div></div>')}]),angular.module("bsgrid").directive("bsGridCellTemplate",["$compile",function(e){return{scope:!0,link:function(t,n,o){var i;o.$observe("bsGridCellTemplate",function(o){angular.isDefined(o)&&(i=e(o)(t),n.html(""),n.append(i))})}}}]),angular.module("bsgrid",["bsgrid.tpls"]).directive("bsGrid",function(){return{scope:{options:"="},templateUrl:"template/bsgrid.html",restrict:"E",controller:["$scope","$element","$filter","$timeout","$state","localStorageService",function(e,t,n,o,i,s){e.filteredItems=e.options.items,e.displayedItems=[],e.showing={begin:0,end:0,of:0},e.setUndefined=function(){angular.isUndefined(e.options.pageSizeShow)&&(e.options.pageSizeShow=!0),angular.isUndefined(e.options.pageSize)&&(e.options.pageSize=25),angular.isUndefined(e.options.pageSizeOptions)&&(e.options.pageSizeOptions=[10,25,50,100]),angular.isUndefined(e.options.localStorage)&&(e.options.localStorage=!1),angular.isUndefined(e.options.localStorageIgnorePageSize)&&(e.options.localStorageIgnorePageSize=!1),angular.isUndefined(e.options.lockTable)&&(e.options.lockTable=!0),angular.isUndefined(e.options.selectable)&&(e.options.selectable=!1),angular.isUndefined(e.options.multiSelect)&&(e.options.multiSelect=!1),angular.isUndefined(e.options.scope)&&(e.options.scope=e),e.scope=e.options.scope,angular.isUndefined(e.options.showSearch)&&(e.options.showSearch=!0),angular.isUndefined(e.options.showFooter)&&(e.options.showFooter=!0),angular.isUndefined(e.options.showExportButton)&&(e.options.showExportButton=!0),angular.isUndefined(e.options.name)&&(e.options.name=i.current.name),angular.isUndefined(e.options.scrollHorizontal)&&(e.options.scrollHorizontal=!0),_.forEach(e.options.columns,function(e){if(angular.isUndefined(e.width)&&(e.width="auto"),angular.isUndefined(e.sortable)&&(e.sortable=!0),angular.isUndefined(e.name)&&angular.isUndefined(e.field))throw"bsgrid: Name is required if no field is provided.";angular.isUndefined(e.visible)&&(e.visible=!0)})},e.localStorageName=function(){return"bsGrid-"+e.options.name},e.getLocalStorage=function(){if(e.options.localStorage){var t=s.get(e.localStorageName());if(t&&(angular.isDefined(t.pageSize)&&!e.options.localStorageIgnorePageSize&&(e.options.pageSize=t.pageSize),angular.isDefined(t.columns))){var n=!1;_.forEach(t.columns,function(t,o){var i=_.findIndex(e.options.columns,{name:t.name});if(i>=0){if(o!==i){var s=e.options.columns[i];e.options.columns[i]=e.options.columns[o],e.options.columns[o]=s}e.options.columns[o].visible=t.visible,e.options.columns[o].sorted=t.sorted,angular.isDefined(t.reverse)&&(e.options.columns[o].reverse=t.reverse),t.sorted&&(n=!0)}}),n||(e.options.columns[0].sorted=!0)}}},e.hideColumn=function(t){t.visible=!t.visible,e.setLocalStorage()},e.setLocalStorage=function(){e.options.localStorage&&s.set(e.localStorageName(),{pageSize:e.options.pageSize,columns:e.options.columns})},e.onDropComplete=function(t,n){var o=e.options.columns.indexOf(n);e.options.columns.splice(o,1),e.options.columns.splice(t,0,n),e.setLocalStorage()},e.setWatches=function(){e.$watch(function(){return e.options.pageSize},function(){e.setLocalStorage(),e.options.currentPage=1,e.getPage()},!0),e.$watch(function(){return e.options.items},function(){var t=[];_.forEach(e.options.selectedItems,function(n){var o=_(e.options.items).indexOf(n);-1===o&&t.push(n)}),_.forEach(t,function(t){var n=null,o=null;angular.isDefined(t.id)&&(n=_.where(e.options.items,{id:t.id}),1===n.length&&(o=n[0]));var i=_.indexOf(e.options.selectedItems,t);o?e.options.selectedItems.splice(i,1,o):e.options.selectedItems.splice(i)}),e.start()},!0)},e.getPage=function(){var t=(e.options.currentPage-1)*e.options.pageSize,n=t+e.options.pageSize;e.displayedItems=e.filteredItems.slice(t,n),0===e.displayedItems.length?e.showing.begin=t:e.showing.begin=t+1,e.showing.end=t+e.displayedItems.length,e.showing.of=e.filteredItems.length},e.sort=function(t,o){if(t.sortable===!0){_.forEach(e.options.columns,function(e){e!==t&&(e.sorted=!1,e.reverse=!1)}),t.sorted=!0,o&&(t.reverse=!t.reverse);var i=n("orderBy");e.filteredItems=i(e.filteredItems,t.field,t.reverse),e.getPage(),e.setLocalStorage()}},e.filter=function(){var t=n("filter");e.filteredItems=t(e.options.items,e.options.searchFilter),e.getPage()},e.selectItem=function(t){if(e.options.selectable){var n=_.indexOf(e.options.selectedItems,t);if(-1!==n)return void e.options.selectedItems.splice(n,1);e.options.multiSelect||1!==e.options.selectedItems.length||e.options.selectedItems.splice(0,1),e.options.selectedItems.push(t)}},e.selectItemCheckbox=function(t,n){t.stopPropagation(),e.selectItem(n)},e.isSelectedItem=function(t){var n=_.indexOf(e.options.selectedItems,t);return-1!==n?!0:!1},e.toggleSelectAll=function(t){t?_.forEach(e.filteredItems,function(t){e.isSelectedItem(t)||e.selectItem(t)}):_.forEach(e.filteredItems,function(t){e.isSelectedItem(t)&&e.selectItem(t)})},e.lockTable=function(){e.options.lockTable&&o(function(){var n=angular.element(t).find("div table thead tr th"),o=0;_.forEach(n,function(t){var n=angular.element(t);e.options.selectable&&0===o?o--:"auto"===e.options.columns[o].width&&angular.element(n).css("width",t.offsetWidth),o++});var i=angular.element(t).find("div table");angular.element(i).css("table-layout","fixed")},0)},e.start=function(){""!==e.options.searchFilter&&e.filter();var t=_.find(e.options.columns,"sorted");angular.isDefined(t)?e.sort(t,!1):e.getPage()},e.init=function(){e.setUndefined(),e.getLocalStorage(),e.setWatches(),e.lockTable(),e.start()},e.init(),e.exportTypes={FILTERED:0,SELECTED:1,ALL:2},e.GetRowsForExport=function(t,n,o){var i=0,s="",a=[];switch(t){case e.exportTypes.FILTERED:a=e.displayedItems;break;case e.exportTypes.SELECTED:a=e.options.selectedItems;break;case e.exportTypes.ALL:a=e.options.items}return _.each(a,function(t){_.each(n,function(n){s=angular.isDefined(t[n])?t[n]:angular.isDefined(t.search)&&angular.isDefined(t.search[n])?t.search[n]:"",o+='"'+e.csvStringify(s)+'",'}),o=e.swapLastCommaForNewline(o),i++}),o},e.csvStringify=function(e){return null===e||angular.isUndefined(e)?"":angular.isNumber(e)?""+e:angular.isBoolean(e)?e?"True":"False":angular.isString(e)?e.replace(/"/g,'""'):angular.toJson(e).replace(/"/g,'""')},e.swapLastCommaForNewline=function(e){var t=e.substr(0,e.length-1);return t+"\n"},e.SubmitFileToUser=function(e){var t=angular.element("<a/>");t.attr({href:"data:attachment/csv;charset=utf-8,"+encodeURI(e),target:"_blank",download:"export.csv"})[0].click()},e.Export=function(t){var n=[],o="",i=[];_.each(e.options.columns,function(e){n.push(e.field),i.push(e.name)}),_.each(i,function(t){o+='"'+e.csvStringify(t)+'",'}),o=e.swapLastCommaForNewline(o),o=e.GetRowsForExport(t,n,o),e.SubmitFileToUser(o)}}]}}),angular.module("bsgrid").filter("naturalSortBy",["$parse",function(e){function t(e,n){var o,i,s=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,a=/(^[ ]*|[ ]*$)/g,l=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,r=/^0x[0-9a-f]+$/i,c=/^0/,p=function(e){return t.insensitive&&(""+e).toLowerCase()||""+e},d=p(e).replace(a,"")||"",g=p(n).replace(a,"")||"",u=d.replace(s,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),f=g.replace(s,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),m=parseInt(d.match(r))||1!=u.length&&d.match(l)&&Date.parse(d),h=parseInt(g.match(r))||m&&g.match(l)&&Date.parse(g)||null;if(h){if(h>m)return-1;if(m>h)return 1}for(var v=0,b=Math.max(u.length,f.length);b>v;v++){if(o=!(u[v]||"").match(c)&&parseFloat(u[v])||u[v]||0,i=!(f[v]||"").match(c)&&parseFloat(f[v])||f[v]||0,isNaN(o)!==isNaN(i))return isNaN(o)?1:-1;if(typeof o!=typeof i&&(o+="",i+=""),i>o)return-1;if(o>i)return 1}return 0}return function(n,o,i){function s(e,t){for(var n=0;n<o.length;n++){var i=o[n](e,t);if(0!==i)return i}return 0}function a(e,t){return t?function(t,n){return e(n,t)}:e}if(!angular.isArray(n))return n;if(!o)return n;o=angular.isArray(o)?o:[o],o=_.map(o,function(n){var o=!1,i=n||angular.identity;if(angular.isString(n)&&(("+"==n.charAt(0)||"-"==n.charAt(0))&&(o="-"==n.charAt(0),n=n.substring(1)),i=e(n),i.constant)){var s=i();return a(function(e,n){return t(e[s],n[s])},o)}return a(function(e,n){return t(i(e),i(n))},o)});for(var l=[],r=0;r<n.length;r++)l.push(n[r]);return l.sort(a(s,i))}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJzZ3JpZENhY2hlSHRtbC5qcyIsImJzZ3JpZC1jZWxsLWRpcmVjdGl2ZS5qcyIsImJzZ3JpZC1kaXJlY3RpdmUuanMiLCJuYXR1cmFsLXNvcnQtYnktZmlsdGVyLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJydW4iLCIkdGVtcGxhdGVDYWNoZSIsInB1dCIsImRpcmVjdGl2ZSIsIiRjb21waWxlIiwic2NvcGUiLCJsaW5rIiwiZWxlbWVudCIsImF0dHJzIiwiZWwiLCIkb2JzZXJ2ZSIsInRwbCIsImlzRGVmaW5lZCIsImh0bWwiLCJhcHBlbmQiLCJvcHRpb25zIiwidGVtcGxhdGVVcmwiLCJyZXN0cmljdCIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkZWxlbWVudCIsIiRmaWx0ZXIiLCIkdGltZW91dCIsIiRzdGF0ZSIsImxvY2FsU3RvcmFnZVNlcnZpY2UiLCJmaWx0ZXJlZEl0ZW1zIiwiaXRlbXMiLCJkaXNwbGF5ZWRJdGVtcyIsInNob3dpbmciLCJiZWdpbiIsImVuZCIsIm9mIiwic2V0VW5kZWZpbmVkIiwiaXNVbmRlZmluZWQiLCJwYWdlU2l6ZVNob3ciLCJwYWdlU2l6ZSIsInBhZ2VTaXplT3B0aW9ucyIsImxvY2FsU3RvcmFnZSIsImxvY2FsU3RvcmFnZUlnbm9yZVBhZ2VTaXplIiwibG9ja1RhYmxlIiwic2VsZWN0YWJsZSIsIm11bHRpU2VsZWN0Iiwic2hvd1NlYXJjaCIsInNob3dGb290ZXIiLCJzaG93RXhwb3J0QnV0dG9uIiwibmFtZSIsImN1cnJlbnQiLCJzY3JvbGxIb3Jpem9udGFsIiwiXyIsImZvckVhY2giLCJjb2x1bW5zIiwiYyIsIndpZHRoIiwic29ydGFibGUiLCJmaWVsZCIsInZpc2libGUiLCJsb2NhbFN0b3JhZ2VOYW1lIiwiZ2V0TG9jYWxTdG9yYWdlIiwiZGF0YSIsImdldCIsImlzU29ydGVkIiwiaSIsImluZGV4IiwiZmluZEluZGV4IiwidG1wIiwic29ydGVkIiwicmV2ZXJzZSIsImhpZGVDb2x1bW4iLCJzZXRMb2NhbFN0b3JhZ2UiLCJzZXQiLCJvbkRyb3BDb21wbGV0ZSIsIm9iaiIsIm90aGVySW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwic2V0V2F0Y2hlcyIsIiR3YXRjaCIsImN1cnJlbnRQYWdlIiwiZ2V0UGFnZSIsIm5ld1NlbGVjdGVkIiwic2VsZWN0ZWRJdGVtcyIsIml0ZW0iLCJwdXNoIiwibWF0Y2hlcyIsIm1hdGNoIiwiaWQiLCJ3aGVyZSIsImxlbmd0aCIsInNJbmRleCIsInN0YXJ0Iiwic2xpY2UiLCJzb3J0IiwiY29sIiwiY2hhbmdlUmV2ZXJzZSIsImZpbHRlciIsInNlYXJjaEZpbHRlciIsInNlbGVjdEl0ZW0iLCJzZWxlY3RJdGVtQ2hlY2tib3giLCIkZXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJpc1NlbGVjdGVkSXRlbSIsInRvZ2dsZVNlbGVjdEFsbCIsInZhbHVlIiwidGhzIiwiZmluZCIsInRoIiwiZSIsImNzcyIsIm9mZnNldFdpZHRoIiwidGFibGUiLCJpbml0IiwiZXhwb3J0VHlwZXMiLCJGSUxURVJFRCIsIlNFTEVDVEVEIiwiQUxMIiwiR2V0Um93c0ZvckV4cG9ydCIsImV4cG9ydFR5cGUiLCJmaWVsZE5hbWVzIiwiY3N2RGF0YSIsIml0ZW1JbmRleCIsImN1ckNlbGxSYXciLCJpdGVtc1RvRXhwb3J0IiwiZWFjaCIsIml0ZW1Ub0V4cG9ydCIsImZpZWxkTmFtZSIsInNlYXJjaCIsImNzdlN0cmluZ2lmeSIsInN3YXBMYXN0Q29tbWFGb3JOZXdsaW5lIiwic3RyIiwiaXNOdW1iZXIiLCJpc0Jvb2xlYW4iLCJpc1N0cmluZyIsInJlcGxhY2UiLCJ0b0pzb24iLCJuZXdTdHIiLCJzdWJzdHIiLCJTdWJtaXRGaWxlVG9Vc2VyIiwiYXR0ciIsImhyZWYiLCJlbmNvZGVVUkkiLCJ0YXJnZXQiLCJkb3dubG9hZCIsImNsaWNrIiwiRXhwb3J0IiwicmVxdWVzdHMiLCJ2IiwiJHBhcnNlIiwibmF0dXJhbFNvcnQiLCJhIiwiYiIsIm9GeE5jTCIsIm9GeU5jTCIsInJlIiwic3JlIiwiZHJlIiwiaHJlIiwib3JlIiwicyIsImluc2Vuc2l0aXZlIiwidG9Mb3dlckNhc2UiLCJ4IiwieSIsInhOIiwic3BsaXQiLCJ5TiIsInhEIiwicGFyc2VJbnQiLCJEYXRlIiwicGFyc2UiLCJ5RCIsImNMb2MiLCJudW1TIiwiTWF0aCIsIm1heCIsInBhcnNlRmxvYXQiLCJpc05hTiIsImFycmF5Iiwic29ydFByZWRpY2F0ZSIsInJldmVyc2VPcmRlciIsImNvbXBhcmF0b3IiLCJvMSIsIm8yIiwiY29tcCIsInJldmVyc2VDb21wYXJhdG9yIiwiZGVzY2VuZGluZyIsImlzQXJyYXkiLCJtYXAiLCJwcmVkaWNhdGUiLCJpZGVudGl0eSIsImNoYXJBdCIsInN1YnN0cmluZyIsImNvbnN0YW50Iiwia2V5IiwiYXJyYXlDb3B5Il0sIm1hcHBpbmdzIjoiQUFBQUEsUUFBQUMsT0FBQSxlQUFBQyxLQUFBLGlCQUFBLFNBQUFDLEdBQUFBLEVBQUFDLElBQUEsdUJBQUEsaXZJQ0VBSixRQUFBQyxPQUFBLFVBQUFJLFVBQUEsc0JBQUEsV0FBQSxTQUFBQyxHQUNBLE9BQ0FDLE9BQUEsRUFDQUMsS0FBQSxTQUFBRCxFQUFBRSxFQUFBQyxHQUNBLEdBQUFDLEVBRUFELEdBQUFFLFNBQUEscUJBQUEsU0FBQUMsR0FDQWIsUUFBQWMsVUFBQUQsS0FFQUYsRUFBQUwsRUFBQU8sR0FBQU4sR0FHQUUsRUFBQU0sS0FBQSxJQUdBTixFQUFBTyxPQUFBTCxXQ1ZBWCxRQUFBQyxPQUFBLFVBQUEsZ0JBQUFJLFVBQUEsU0FBQSxXQUNBLE9BQ0FFLE9BQ0FVLFFBQUEsS0FFQUMsWUFBQSx1QkFDQUMsU0FBQSxJQUNBQyxZQUFBLFNBQUEsV0FBQSxVQUFBLFdBQUEsU0FBQSxzQkFBQSxTQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUVBTCxFQUFBTSxjQUFBTixFQUFBSixRQUFBVyxNQUNBUCxFQUFBUSxrQkFFQVIsRUFBQVMsU0FDQUMsTUFBQSxFQUNBQyxJQUFBLEVBQ0FDLEdBQUEsR0FJQVosRUFB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QUNBcEksRUFBQSxFQUFBQSxFQUFBbUgsRUFBQXpGLE9BQUExQixJQUFBb0ksRUFBQS9HLEtBQUE4RixFQUFBbkgsR0FDQSxPQUFBb0ksR0FBQXRHLEtBQUE0RixFQUFBSixFQUFBRCIsImZpbGUiOiJic2dyaWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZShcImJzZ3JpZC50cGxzXCIpLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkgeyR0ZW1wbGF0ZUNhY2hlLnB1dChcInRlbXBsYXRlL2JzZ3JpZC5odG1sXCIsXCI8ZGl2IGNsYXNzPVxcXCJyb3cgYnMtZ3JpZFxcXCI+PGRpdiBjbGFzcz1cXFwiY29sLXNtLTlcXFwiPjxkaXYgdWliLWRyb3Bkb3duPVxcXCJcXFwiPjxidXR0b24gY2xhc3M9XFxcImJ0biBidG4tZGVmYXVsdFxcXCIgdWliLWRyb3Bkb3duLXRvZ2dsZT1cXFwiXFxcIiBuZy1jbGFzcz1cXFwieyBcXCdidG4tc21cXCc6IG9wdGlvbnMucGFnZVNpemVTaG93LCBcXCdidG4teHNcXCc6ICFvcHRpb25zLnBhZ2VTaXplU2hvdyB9XFxcIj5PcHRpb25zIDxzcGFuIGNsYXNzPVxcXCJjYXJldFxcXCI+PC9zcGFuPjwvYnV0dG9uPjx1bCBjbGFzcz1cXFwiZHJvcGRvd24tbWVudVxcXCIgcm9sZT1cXFwibWVudVxcXCI+PGxpIG5nLWlmPVxcXCJvcHRpb25zLnBhZ2VTaXplU2hvd1xcXCIgcm9sZT1cXFwicHJlc2VudGF0aW9uXFxcIiBjbGFzcz1cXFwiZHJvcGRvd24taGVhZGVyXFxcIj5QYWdlIFNpemU8L2xpPjxsaSBuZy1pZj1cXFwib3B0aW9ucy5wYWdlU2l6ZVNob3dcXFwiIG5nLXJlcGVhdD1cXFwic2l6ZSBpbiBvcHRpb25zLnBhZ2VTaXplT3B0aW9uc1xcXCIgbmctY2xhc3M9XFxcIntcXCdhY3RpdmVcXCc6IG9wdGlvbnMucGFnZVNpemUgPT09IHNpemUgfVxcXCI+PGEgdGFiaW5kZXg9XFxcIi0xXFxcIiBuZy1jbGljaz1cXFwib3B0aW9ucy5wYWdlU2l6ZSA9IHNpemVcXFwiPnt7IHNpemUgfX08L2E+PC9saT48bGkgbmctaWY9XFxcIm9wdGlvbnMucGFnZVNpemVTaG93XFxcIiByb2xlPVxcXCJwcmVzZW50YXRpb25cXFwiIGNsYXNzPVxcXCJkaXZpZGVyXFxcIj48L2xpPjxsaSByb2xlPVxcXCJwcmVzZW50YXRpb25cXFwiIGNsYXNzPVxcXCJkcm9wZG93bi1oZWFkZXJcXFwiPkNvbHVtbnM8L2xpPjxsaSBuZy1yZXBlYXQ9XFxcImNvbCBpbiBvcHRpb25zLmNvbHVtbnNcXFwiPjxhIG5nLWNsaWNrPVxcXCJoaWRlQ29sdW1uKGNvbClcXFwiPjxpIG5nLWNsYXNzPVxcXCJjb2wudmlzaWJsZSA/IFxcJ2dseXBoaWNvbiBnbHlwaGljb24tb2tcXCc6IFxcJ2dseXBoaWNvbiBnbHlwaGljb24tcmVtb3ZlXFwnXFxcIj48L2k+IDxzcGFuPnt7IGNvbC5uYW1lIH19PC9zcGFuPjwvYT48L2xpPjwvdWw+PC9kaXY+PC9kaXY+PGRpdiBuZy1pZj1cXFwib3B0aW9ucy5zaG93U2VhcmNoXFxcIiBjbGFzcz1cXFwiY29sLXNtLTNcXFwiIHN0eWxlPVxcXCJtYXJnaW4tYm90dG9tOiAxMHB4XFxcIiBuZy1jbGFzcz1cXFwieyBcXCdjb2wtc20tb2Zmc2V0LTlcXCc6ICFvcHRpb25zLnBhZ2VTaXplU2hvdyB9XFxcIj48ZGl2IGNsYXNzPVxcXCJpbnB1dC1ncm91cCBpbnB1dC1ncm91cC1zbVxcXCI+PGlucHV0IHR5cGU9XFxcInRleHRcXFwiIGNsYXNzPVxcXCJmb3JtLWNvbnRyb2xcXFwiIHBsYWNlaG9sZGVyPVxcXCJTZWFyY2hcXFwiIG5nLW1vZGVsPVxcXCJvcHRpb25zLnNlYXJjaEZpbHRlclxcXCIgbmctY2hhbmdlPVxcXCJmaWx0ZXIoKVxcXCIgbmctbW9kZWwtb3B0aW9ucz1cXFwieyBkZWJvdW5jZTogeyBcXCdkZWZhdWx0XFwnOiA0MDAsIFxcJ2JsdXJcXCc6IDAgfSB9XFxcIj4gPHNwYW4gY2xhc3M9XFxcImlucHV0LWdyb3VwLWFkZG9uXFxcIj48aSBjbGFzcz1cXFwiZ2x5cGhpY29uIGdseXBoaWNvbi1zZWFyY2hcXFwiPjwvaT48L3NwYW4+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLW1kLTEyXFxcIiBuZy1jbGFzcz1cXFwie1xcJ3RhYmxlLXJlc3BvbnNpdmVcXCc6IG9wdGlvbnMuc2Nyb2xsSG9yaXpvbnRhbH1cXFwiPjx0YWJsZSBjbGFzcz1cXFwidGFibGUgdGFibGUtc3RyaXBlZCB0YWJsZS1ib3JkZXJlZCB0YWJsZS1ob3ZlciB0YWJsZS1jb25kZW5zZWQgY29sb3IyXFxcIj48dGhlYWQ+PHRyPjx0aCBuZy1pZj1cXFwib3B0aW9ucy5tdWx0aVNlbGVjdFxcXCIgY2xhc3M9XFxcImJzLWdyaWQtc2VsZWN0XFxcIj48aW5wdXQgbmctaWY9XFxcIm9wdGlvbnMubXVsdGlTZWxlY3RcXFwiIHR5cGU9XFxcImNoZWNrYm94XFxcIiBuZy1tb2RlbD1cXFwic2VsZWN0QWxsVG9nZ2xlXFxcIiBuZy1jaGFuZ2U9XFxcInRvZ2dsZVNlbGVjdEFsbChzZWxlY3RBbGxUb2dnbGUpXFxcIj48L3RoPjx0aCBjbGFzcz1cXFwiYnMtZ3JpZC1vdmVyZmxvd1xcXCIgbmctcmVwZWF0PVxcXCJjb2wgaW4gb3B0aW9ucy5jb2x1bW5zXFxcIiBuZy1jbGljaz1cXFwic29ydChjb2wsIHRydWUpXFxcIiBzdHlsZT1cXFwid2lkdGg6IHt7IGNvbC53aWR0aCB9fTtcXFwiIG5nLXNob3c9XFxcImNvbC52aXNpYmxlXFxcIj48ZGl2IG5nLWRyb3A9XFxcInRydWVcXFwiIG5nLWRyb3Atc3VjY2Vzcz1cXFwib25Ecm9wQ29tcGxldGUoJGluZGV4LCAkZGF0YSwgJGV2dClcXFwiPjxkaXYgbmctZHJhZz1cXFwidHJ1ZVxcXCIgbmctZHJhZy1kYXRhPVxcXCJjb2xcXFwiPjxzcGFuPnt7IGNvbC5uYW1lIHx8IGNvbC5maWVsZCB9fTwvc3Bhbj4gPHNwYW4gbmctaWY9XFxcImNvbC5zb3J0ZWRcXFwiIGNsYXNzPVxcXCJvcmRlclxcXCIgbmctY2xhc3M9XFxcIntcXCdkcm9wdXBcXCc6IGNvbC5yZXZlcnNlIH1cXFwiPjxzcGFuIGNsYXNzPVxcXCJjYXJldFxcXCI+PC9zcGFuPjwvc3Bhbj48L2Rpdj48L2Rpdj48L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+PHRyIG5nLXJlcGVhdD1cXFwiaXRlbSBpbiBkaXNwbGF5ZWRJdGVtc1xcXCIgbmctY2xhc3M9XFxcIntcXCdpbmZvXFwnIDogaXNTZWxlY3RlZEl0ZW0oIGl0ZW0gKSB9XFxcIiBuZy1jbGljaz1cXFwic2VsZWN0SXRlbShpdGVtKVxcXCI+PHRkIG5nLWlmPVxcXCJvcHRpb25zLm11bHRpU2VsZWN0XFxcIj48aW5wdXQgdHlwZT1cXFwiY2hlY2tib3hcXFwiIGNsYXNzPVxcXCJiZy1ncmlkLWNoZWNrYm94XFxcIiBuZy1jaGVja2VkPVxcXCJpc1NlbGVjdGVkSXRlbShpdGVtKVxcXCIgbmctY2xpY2s9XFxcInNlbGVjdEl0ZW1DaGVja2JveCgkZXZlbnQsIGl0ZW0pXFxcIj48L3RkPjx0ZCBjbGFzcz1cXFwiYnMtZ3JpZC1vdmVyZmxvd1xcXCIgbmctcmVwZWF0PVxcXCJjb2wgaW4gb3B0aW9ucy5jb2x1bW5zXFxcIiBuZy1zaG93PVxcXCJjb2wudmlzaWJsZVxcXCI+PGRpdiBuZy1pZj1cXFwiY29sLnRlbXBsYXRlXFxcIiBicy1ncmlkLWNlbGwtdGVtcGxhdGU9XFxcInt7IGNvbC50ZW1wbGF0ZSB9fVxcXCI+PC9kaXY+PGRpdiBuZy1pZj1cXFwiIWNvbC50ZW1wbGF0ZVxcXCIgY2xhc3M9XFxcImJzLWdyaWQtY29sdW1uIGJzLWdyaWQtY29sdW1uLXt7Y29sLmZpZWxkfX1cXFwiPnt7IGl0ZW1bY29sLmZpZWxkXSB9fTwvZGl2PjwvdGQ+PC90cj48L3Rib2R5PjwvdGFibGU+PC9kaXY+PGRpdiBuZy1pZj1cXFwib3B0aW9ucy5zaG93Rm9vdGVyXFxcIiBjbGFzcz1cXFwiY29sLW1kLTEyXFxcIj48ZGl2IGNsYXNzPVxcXCJjb2wtc20tNFxcXCI+PGRpdiBjbGFzcz1cXFwicm93XFxcIj48c3BhbiBuZy1pZj1cXFwib3B0aW9ucy5zZWxlY3RlZEl0ZW1zLmxlbmd0aCAhPSAwXFxcIj5TZWxlY3RlZCA8c3Ryb25nIGNsYXNzPVxcJ1xcXFxcXFwidGV4dC1wcmltYXJ5XFxcXFxcXCJcXCc+e3tvcHRpb25zLnNlbGVjdGVkSXRlbXMubGVuZ3RofX08L3N0cm9uZz48L3NwYW4+IDxzcGFuIG5nLWNsYXNzPVxcXCJ7IFxcJ3RleHQtZGFuZ2VyXFwnOiBkaXNwbGF5ZWRJdGVtcy5sZW5ndGggPT0gMH1cXFwiPlNob3dpbmcgPHN0cm9uZz57e3Nob3dpbmcuYmVnaW59fTwvc3Ryb25nPiB0byA8c3Ryb25nPnt7c2hvd2luZy5lbmR9fTwvc3Ryb25nPiBvZiA8c3Ryb25nIGNsYXNzPVxcJ1xcXFxcXFwidGV4dC1wcmltYXJ5XFxcXFxcXCJcXCc+e3sgc2hvd2luZy5vZn19PC9zdHJvbmc+IGl0ZW1zPC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PHNwYW4gbmctaWY9XFxcIm9wdGlvbnMuc2VhcmNoRmlsdGVyXFxcIj4oPGVtPkZpbHRlcmVkIGRvd24gZnJvbSA8c3Ryb25nPnt7b3B0aW9ucy5pdGVtcy5sZW5ndGh9fTwvc3Ryb25nPjwvZW0+KTwvc3Bhbj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtc20tOFxcXCI+PHVpYi1wYWdpbmF0aW9uIGNsYXNzPVxcXCJwYWdpbmF0aW9uLXNtIHB1bGwtcmlnaHQgY29sb3IyXFxcIiBib3VuZGFyeS1saW5rcz1cXFwidHJ1ZVxcXCIgbWF4LXNpemU9XFxcIjlcXFwiIGl0ZW1zLXBlci1wYWdlPVxcXCJvcHRpb25zLnBhZ2VTaXplXFxcIiB0b3RhbC1pdGVtcz1cXFwiZmlsdGVyZWRJdGVtcy5sZW5ndGhcXFwiIG5nLW1vZGVsPVxcXCJvcHRpb25zLmN1cnJlbnRQYWdlXFxcIiBuZy1jaGFuZ2U9XFxcImdldFBhZ2UoKVxcXCIgcHJldmlvdXMtdGV4dD1cXFwiUHJldmlvdXNcXFwiIG5leHQtdGV4dD1cXFwiTmV4dFxcXCIgZmlyc3QtdGV4dD1cXFwiRmlyc3RcXFwiIGxhc3QtdGV4dD1cXFwiTGFzdFxcXCI+PC91aWItcGFnaW5hdGlvbj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtc20tOVxcXCIgbmctaWY9XFxcIm9wdGlvbnMuc2hvd0V4cG9ydEJ1dHRvblxcXCI+PGRpdiB1aWItZHJvcGRvd249XFxcIlxcXCI+PGJ1dHRvbiBjbGFzcz1cXFwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbVxcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiB1aWItZHJvcGRvd24tdG9nZ2xlPVxcXCJcXFwiPkV4cG9ydCA8c3BhbiBjbGFzcz1cXCdcXFxcXFxcImNhcmV0XFxcXFxcXCJcXCc+PC9zcGFuPjwvYnV0dG9uPjx1bCBjbGFzcz1cXFwiZHJvcGRvd24tbWVudVxcXCIgcm9sZT1cXFwibWVudVxcXCI+PGxpIHJvbGU9XFxcInByZXNlbnRhdGlvblxcXCIgY2xhc3M9XFxcImRyb3Bkb3duLWhlYWRlclxcXCI+PGEgdGFiaW5kZXg9XFxcIi0xXFxcIiBuZy1jbGljaz1cXFwiRXhwb3J0KGV4cG9ydFR5cGVzLkZJTFRFUkVEKVxcXCI+RmlsdGVyZWQ8L2E+PC9saT48bGkgcm9sZT1cXFwicHJlc2VudGF0aW9uXFxcIiBjbGFzcz1cXFwiZHJvcGRvd24taGVhZGVyXFxcIiBuZy1pZj1cXFwib3B0aW9ucy5zZWxlY3RlZEl0ZW1zWzBdXFxcIj48YSBuZy1jbGljaz1cXFwiRXhwb3J0KGV4cG9ydFR5cGVzLlNFTEVDVEVEKVxcXCI+U2VsZWN0ZWQ8L2E+PC9saT48bGkgcm9sZT1cXFwicHJlc2VudGF0aW9uXFxcIiBjbGFzcz1cXFwiZHJvcGRvd24taGVhZGVyXFxcIj48YSBuZy1jbGljaz1cXFwiRXhwb3J0KGV4cG9ydFR5cGVzLkFMTClcXFwiPkFsbDwvYT48L2xpPjwvdWw+PC9kaXY+PC9kaXY+PC9kaXY+XCIpO31dKTsiLCJcclxuLy8gc291Y2UgZnJvbSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE0ODQ2ODM2L2luc2VydC1hbi1hbmd1bGFyLWpzLXRlbXBsYXRlLXN0cmluZy1pbnNpZGUtYW4tZWxlbWVudFxyXG5hbmd1bGFyLm1vZHVsZSgnYnNncmlkJykuZGlyZWN0aXZlKCdic0dyaWRDZWxsVGVtcGxhdGUnLCBmdW5jdGlvbiAoJGNvbXBpbGUpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgc2NvcGU6IHRydWUsXHJcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG4gICAgICAgICAgICB2YXIgZWw7XHJcblxyXG4gICAgICAgICAgICBhdHRycy4kb2JzZXJ2ZSgnYnNHcmlkQ2VsbFRlbXBsYXRlJywgZnVuY3Rpb24gKHRwbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHRwbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb21waWxlIHRoZSBwcm92aWRlZCB0ZW1wbGF0ZSBhZ2FpbnN0IHRoZSBjdXJyZW50IHNjb3BlXHJcbiAgICAgICAgICAgICAgICAgICAgZWwgPSAkY29tcGlsZSh0cGwpKHNjb3BlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc3R1cGlkIHdheSBvZiBlbXB0eWluZyB0aGUgZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaHRtbCgnJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCB0aGUgdGVtcGxhdGUgY29udGVudFxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kKGVsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEBuZ0RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIGJzR3JpZFxuICogQHBhcmFtIHtleHByZXNzaW9ufSBic0dyaWRcbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2JzZ3JpZCcsIFsnYnNncmlkLnRwbHMnXSkuZGlyZWN0aXZlKCdic0dyaWQnLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgc2NvcGU6IHtcbiAgICAgIG9wdGlvbnM6ICc9J1xuICAgIH0sXG4gICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZS9ic2dyaWQuaHRtbCcsXG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICBjb250cm9sbGVyOiBmdW5jdGlvbiAoJHNjb3BlLCAkZWxlbWVudCwgJGZpbHRlciwgJHRpbWVvdXQsICRzdGF0ZSwgbG9jYWxTdG9yYWdlU2VydmljZSkge1xuXG4gICAgICAkc2NvcGUuZmlsdGVyZWRJdGVtcyA9ICRzY29wZS5vcHRpb25zLml0ZW1zO1xuICAgICAgJHNjb3BlLmRpc3BsYXllZEl0ZW1zID0gW107XG5cbiAgICAgICRzY29wZS5zaG93aW5nID0ge1xuICAgICAgICBiZWdpbjogMCxcbiAgICAgICAgZW5kOiAwLFxuICAgICAgICBvZjogMFxuICAgICAgfTtcblxuICAgICAgLy9zZXQgdmFsdWVzIGlmIG5vdCBkZWZpbmVkXG4gICAgICAkc2NvcGUuc2V0VW5kZWZpbmVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZCgkc2NvcGUub3B0aW9ucy5wYWdlU2l6ZVNob3cpKSB7XG4gICAgICAgICAgJHNjb3BlLm9wdGlvbnMucGFnZVNpemVTaG93ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZCgkc2NvcGUub3B0aW9ucy5wYWdlU2l6ZSkpIHtcbiAgICAgICAgICAkc2NvcGUub3B0aW9ucy5wYWdlU2l6ZSA9IDI1O1xuICAgICAgICB9XG4gICAgICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKCRzY29wZS5vcHRpb25zLnBhZ2VTaXplT3B0aW9ucykpIHtcbiAgICAgICAgICAkc2NvcGUub3B0aW9ucy5wYWdlU2l6ZU9wdGlvbnMgPSBbMTAsIDI1LCA1MCwgMTAwXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZCgkc2NvcGUub3B0aW9ucy5sb2NhbFN0b3JhZ2UpKSB7XG4gICAgICAgICAgJHNjb3BlLm9wdGlvbnMubG9jYWxTdG9yYWdlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoJHNjb3BlLm9wdGlvbnMubG9jYWxTdG9yYWdlSWdub3JlUGFnZVNpemUpKSB7XG4gICAgICAgICAgJHNjb3BlLm9wdGlvbnMubG9jYWxTdG9yYWdlSWdub3JlUGFnZVNpemUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZCgkc2NvcGUub3B0aW9ucy5sb2NrVGFibGUpKSB7XG4gICAgICAgICAgJHNjb3BlLm9wdGlvbnMubG9ja1RhYmxlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZCgkc2NvcGUub3B0aW9ucy5zZWxlY3RhYmxlKSkge1xuICAgICAgICAgICRzY29wZS5vcHRpb25zLnNlbGVjdGFibGUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZCgkc2NvcGUub3B0aW9ucy5tdWx0aVNlbGVjdCkpIHtcbiAgICAgICAgICAkc2NvcGUub3B0aW9ucy5tdWx0aVNlbGVjdCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKCRzY29wZS5vcHRpb25zLnNjb3BlKSkge1xuICAgICAgICAgICRzY29wZS5vcHRpb25zLnNjb3BlID0gJHNjb3BlO1xuICAgICAgICB9XG4gICAgICAgICRzY29wZS5zY29wZSA9ICRzY29wZS5vcHRpb25zLnNjb3BlO1xuXG4gICAgICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKCRzY29wZS5vcHRpb25zLnNob3dTZWFyY2gpKSB7XG4gICAgICAgICAgJHNjb3BlLm9wdGlvbnMuc2hvd1NlYXJjaCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoJHNjb3BlLm9wdGlvbnMuc2hvd0Zvb3RlcikpIHtcbiAgICAgICAgICAkc2NvcGUub3B0aW9ucy5zaG93Rm9vdGVyID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZCgkc2NvcGUub3B0aW9ucy5zaG93RXhwb3J0QnV0dG9uKSkge1xuICAgICAgICAgICRzY29wZS5vcHRpb25zLnNob3dFeHBvcnRCdXR0b24gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKCRzY29wZS5vcHRpb25zLm5hbWUpKSB7XG4gICAgICAgICAgJHNjb3BlLm9wdGlvbnMubmFtZSA9ICRzdGF0ZS5jdXJyZW50Lm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoJHNjb3BlLm9wdGlvbnMuc2Nyb2xsSG9yaXpvbnRhbCkpIHtcbiAgICAgICAgICAkc2NvcGUub3B0aW9ucy5zY3JvbGxIb3Jpem9udGFsID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBfLmZvckVhY2goJHNjb3BlLm9wdGlvbnMuY29sdW1ucywgZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZChjLndpZHRoKSkge1xuICAgICAgICAgICAgYy53aWR0aCA9ICdhdXRvJztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoYy5zb3J0YWJsZSkpIHtcbiAgICAgICAgICAgIGMuc29ydGFibGUgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZChjLm5hbWUpICYmIGFuZ3VsYXIuaXNVbmRlZmluZWQoYy5maWVsZCkpIHtcbiAgICAgICAgICAgIHRocm93ICdic2dyaWQ6IE5hbWUgaXMgcmVxdWlyZWQgaWYgbm8gZmllbGQgaXMgcHJvdmlkZWQuJztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoYy52aXNpYmxlKSkge1xuICAgICAgICAgICAgYy52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgJHNjb3BlLmxvY2FsU3RvcmFnZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAnYnNHcmlkLScgKyAkc2NvcGUub3B0aW9ucy5uYW1lO1xuICAgICAgfTtcblxuICAgICAgLy9DaGVjayBsb2NhbCBzdG9yYWdlIGZvciBzYXZlZCBzZXR0aW5nc1xuICAgICAgJHNjb3BlLmdldExvY2FsU3RvcmFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCEkc2NvcGUub3B0aW9ucy5sb2NhbFN0b3JhZ2UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGF0YSA9IGxvY2FsU3RvcmFnZVNlcnZpY2UuZ2V0KCRzY29wZS5sb2NhbFN0b3JhZ2VOYW1lKCkpO1xuICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChkYXRhLnBhZ2VTaXplKSAmJiAhJHNjb3BlLm9wdGlvbnMubG9jYWxTdG9yYWdlSWdub3JlUGFnZVNpemUpIHtcbiAgICAgICAgICAgICRzY29wZS5vcHRpb25zLnBhZ2VTaXplID0gZGF0YS5wYWdlU2l6ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGRhdGEuY29sdW1ucykpIHtcbiAgICAgICAgICAgIC8vIGRvbid0IHRha2UgYWxsIGluZm8sIHdlIGp1c3Qgd2FudCB0aGUgdmlzYWJsZSBjb2x1bW5zLCBvcmRlciwgcmV2ZXJzZSwgYW5kIHdoaWNoIGlzIHNvcnRlZCBmcm9tIGxvY2FsU3RvcmFnZVxuICAgICAgICAgICAgdmFyIGlzU29ydGVkID0gZmFsc2U7XG4gICAgICAgICAgICBfLmZvckVhY2goZGF0YS5jb2x1bW5zLCBmdW5jdGlvbiAoYywgaSkge1xuICAgICAgICAgICAgICB2YXIgaW5kZXggPSBfLmZpbmRJbmRleCgkc2NvcGUub3B0aW9ucy5jb2x1bW5zLCB7bmFtZTogYy5uYW1lfSk7XG4gICAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgIT09IGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICB2YXIgdG1wID0gJHNjb3BlLm9wdGlvbnMuY29sdW1uc1tpbmRleF07XG4gICAgICAgICAgICAgICAgICAkc2NvcGUub3B0aW9ucy5jb2x1bW5zW2luZGV4XSA9ICRzY29wZS5vcHRpb25zLmNvbHVtbnNbaV07XG4gICAgICAgICAgICAgICAgICAkc2NvcGUub3B0aW9ucy5jb2x1bW5zW2ldID0gdG1wO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkc2NvcGUub3B0aW9ucy5jb2x1bW5zW2ldLnZpc2libGUgPSBjLnZpc2libGU7XG4gICAgICAgICAgICAgICAgJHNjb3BlLm9wdGlvbnMuY29sdW1uc1tpXS5zb3J0ZWQgPSBjLnNvcnRlZDtcbiAgICAgICAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoYy5yZXZlcnNlKSkge1xuICAgICAgICAgICAgICAgICAgJHNjb3BlLm9wdGlvbnMuY29sdW1uc1tpXS5yZXZlcnNlID0gYy5yZXZlcnNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYy5zb3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgIGlzU29ydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vaWYgbm90aGluZyBpcyBzb3J0ZWQsIHNvcnQgdGhlIGZpcnN0IGNvbHVtblxuICAgICAgICAgICAgaWYgKCFpc1NvcnRlZCkge1xuICAgICAgICAgICAgICAkc2NvcGUub3B0aW9ucy5jb2x1bW5zWzBdLnNvcnRlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAkc2NvcGUuaGlkZUNvbHVtbiA9IGZ1bmN0aW9uIChjKSB7XG4gICAgICAgIGMudmlzaWJsZSA9ICFjLnZpc2libGU7XG4gICAgICAgICRzY29wZS5zZXRMb2NhbFN0b3JhZ2UoKTtcbiAgICAgIH07XG5cbiAgICAgIC8vc2F2ZXMgc2V0dGluZ3MgdG8gbG9jYWwgc3RvcmFnZVxuICAgICAgJHNjb3BlLnNldExvY2FsU3RvcmFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCEkc2NvcGUub3B0aW9ucy5sb2NhbFN0b3JhZ2UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldCgkc2NvcGUubG9jYWxTdG9yYWdlTmFtZSgpLCB7XG4gICAgICAgICAgcGFnZVNpemU6ICRzY29wZS5vcHRpb25zLnBhZ2VTaXplLFxuICAgICAgICAgIGNvbHVtbnM6ICRzY29wZS5vcHRpb25zLmNvbHVtbnNcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICAkc2NvcGUub25Ecm9wQ29tcGxldGUgPSBmdW5jdGlvbiAoaW5kZXgsIG9iaikge1xuICAgICAgICAvL29iaiBpcyB0aGUgY29sdW1uIHRoYXQgd2FzIG1vdmVkLCBpbmRleCBpcyB0aGUgY29sdW1uIGluZGV4IHRoYXQgb2JqIHdhcyBkcm9wcGVkIG9udG8uXG4gICAgICAgIHZhciBvdGhlckluZGV4ID0gJHNjb3BlLm9wdGlvbnMuY29sdW1ucy5pbmRleE9mKG9iaik7XG4gICAgICAgICRzY29wZS5vcHRpb25zLmNvbHVtbnMuc3BsaWNlKG90aGVySW5kZXgsIDEpO1xuICAgICAgICAkc2NvcGUub3B0aW9ucy5jb2x1bW5zLnNwbGljZShpbmRleCwgMCwgb2JqKTtcbiAgICAgICAgJHNjb3BlLnNldExvY2FsU3RvcmFnZSgpO1xuICAgICAgfTtcblxuICAgICAgJHNjb3BlLnNldFdhdGNoZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vd2F0Y2ggcGFnZVNpemVcbiAgICAgICAgJHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuICRzY29wZS5vcHRpb25zLnBhZ2VTaXplO1xuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJHNjb3BlLnNldExvY2FsU3RvcmFnZSgpO1xuICAgICAgICAgICRzY29wZS5vcHRpb25zLmN1cnJlbnRQYWdlID0gMTtcbiAgICAgICAgICAkc2NvcGUuZ2V0UGFnZSgpO1xuICAgICAgICB9LCB0cnVlKTtcblxuICAgICAgICAvL3dhdGNoIGl0ZW1zXG4gICAgICAgICRzY29wZS4kd2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiAkc2NvcGUub3B0aW9ucy5pdGVtcztcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIC8vY2hlY2sgdGhhdCBubyBpdGVtcyBpbiBzZWxlY3RlZCBoYXZlIGJlZW4gcmVtb3ZlZFxuICAgICAgICAgIHZhciBuZXdTZWxlY3RlZCA9IFtdO1xuICAgICAgICAgIF8uZm9yRWFjaCgkc2NvcGUub3B0aW9ucy5zZWxlY3RlZEl0ZW1zLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gXygkc2NvcGUub3B0aW9ucy5pdGVtcykuaW5kZXhPZihpdGVtKTtcbiAgICAgICAgICAgIC8vaWYgdGhlIGN1cnJlbnQgc2VsZWN0ZWQgaXRlbSBpcyBOT1QgaW4gdGhlIG1hc3RlciBpdGVtcyBsaXN0LCBzYXZlIGl0LlxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAvL3NhdmUgdGhlIGl0ZW0gc28gaXQgY2FuIGJlIHJlbW92ZWQgZnJvbSB0aGUgc2VsZWN0ZWRJdGVtcyBsaXN0XG4gICAgICAgICAgICAgIG5ld1NlbGVjdGVkLnB1c2goaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLy9SZW1vdmUgZWFjaCBzYXZlZCBpdGVtIGZyb20gdGhlIHNlbGVjdGVkIEl0ZW1zIGxpc3QgdW5sZXNzIHRoZXJlIGlzIGFuIGl0ZW0gd2l0aCB0aGUgc2FtZSBpZFxuICAgICAgICAgIF8uZm9yRWFjaChuZXdTZWxlY3RlZCwgZnVuY3Rpb24gKGl0ZW0pIHtcblxuICAgICAgICAgICAgdmFyIG1hdGNoZXMgPSBudWxsO1xuICAgICAgICAgICAgdmFyIG1hdGNoID0gbnVsbDtcblxuICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlcmUgaXMgYW4gaXRlbSB3aXRoIHRoZSBzYW1lIGlkLCBpZiB0aGVyZSBpcyBhZGQgaXQgdG8gc2VsZWN0ZWQgaXRlbXMsXG4gICAgICAgICAgICAvLyBhc3N1bWluZyBpdCB3YXMganVzdCB1cGRhdGVkIGFuZCB3ZSBzdGlsbCB3YW50IGl0IHNlbGVjdGVkXG5cbiAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChpdGVtLmlkKSkge1xuICAgICAgICAgICAgICBtYXRjaGVzID0gXy53aGVyZSgkc2NvcGUub3B0aW9ucy5pdGVtcywgeydpZCc6IGl0ZW0uaWR9KTtcbiAgICAgICAgICAgICAgaWYgKG1hdGNoZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2ggPSBtYXRjaGVzWzBdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc0luZGV4ID0gXy5pbmRleE9mKCRzY29wZS5vcHRpb25zLnNlbGVjdGVkSXRlbXMsIGl0ZW0pO1xuICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICRzY29wZS5vcHRpb25zLnNlbGVjdGVkSXRlbXMuc3BsaWNlKHNJbmRleCwgMSwgbWF0Y2gpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICRzY29wZS5vcHRpb25zLnNlbGVjdGVkSXRlbXMuc3BsaWNlKHNJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAkc2NvcGUuc3RhcnQoKTtcbiAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICB9O1xuXG4gICAgICAvL1VwZGF0ZXMgdGhlIGN1cnJlbnQgZGlzcGxheWVkIGl0ZW1zIGFuZCBzaG93aW5nIGluZm9cbiAgICAgICRzY29wZS5nZXRQYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYmVnaW4gPSAoKCRzY29wZS5vcHRpb25zLmN1cnJlbnRQYWdlIC0gMSkgKiAkc2NvcGUub3B0aW9ucy5wYWdlU2l6ZSk7XG4gICAgICAgIHZhciBlbmQgPSBiZWdpbiArICRzY29wZS5vcHRpb25zLnBhZ2VTaXplO1xuICAgICAgICAkc2NvcGUuZGlzcGxheWVkSXRlbXMgPSAkc2NvcGUuZmlsdGVyZWRJdGVtcy5zbGljZShiZWdpbiwgZW5kKTtcblxuICAgICAgICAvL3VwZGF0ZSBzaG93aW5nIGluZm9cbiAgICAgICAgaWYgKCRzY29wZS5kaXNwbGF5ZWRJdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAkc2NvcGUuc2hvd2luZy5iZWdpbiA9IGJlZ2luO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICRzY29wZS5zaG93aW5nLmJlZ2luID0gYmVnaW4gKyAxO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLnNob3dpbmcuZW5kID0gYmVnaW4gKyAkc2NvcGUuZGlzcGxheWVkSXRlbXMubGVuZ3RoO1xuICAgICAgICAkc2NvcGUuc2hvd2luZy5vZiA9ICRzY29wZS5maWx0ZXJlZEl0ZW1zLmxlbmd0aDtcbiAgICAgIH07XG5cbiAgICAgIC8vc29ydCBhbGwgdGhlIGl0ZW1zIGJ5IGEgY29sdW1uXG4gICAgICAkc2NvcGUuc29ydCA9IGZ1bmN0aW9uIChjb2wsIGNoYW5nZVJldmVyc2UpIHtcbiAgICAgICAgLy9leGl0IGlmIHdlIGNhbnQgc29ydCB0aGlzIGNvbHVtblxuICAgICAgICBpZiAoY29sLnNvcnRhYmxlICE9PSB0cnVlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy91bnNvcnQgdGhlIHJlc3RcbiAgICAgICAgXy5mb3JFYWNoKCRzY29wZS5vcHRpb25zLmNvbHVtbnMsIGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgaWYgKGMgIT09IGNvbCkge1xuICAgICAgICAgICAgYy5zb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGMucmV2ZXJzZSA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy9pZiBpdCB3YXMgYWxyZWFkeSBzb3J0ZWQgYW5kIHJldmVyc2Ugd2FzIG5vdCBzZXQsIHJldmVyc2UgaXRcbiAgICAgICAgY29sLnNvcnRlZCA9IHRydWU7XG4gICAgICAgIGlmIChjaGFuZ2VSZXZlcnNlKSB7XG4gICAgICAgICAgY29sLnJldmVyc2UgPSAhY29sLnJldmVyc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZmlsdGVyID0gJGZpbHRlcignb3JkZXJCeScpO1xuICAgICAgICAkc2NvcGUuZmlsdGVyZWRJdGVtcyA9IGZpbHRlcigkc2NvcGUuZmlsdGVyZWRJdGVtcywgY29sLmZpZWxkLCBjb2wucmV2ZXJzZSk7XG4gICAgICAgICRzY29wZS5nZXRQYWdlKCk7XG5cbiAgICAgICAgJHNjb3BlLnNldExvY2FsU3RvcmFnZSgpO1xuICAgICAgfTtcblxuICAgICAgLy9maWx0ZXIgdGhlIGl0ZW1zIGJhc2VkIG9uIHRoZSBzZWFyY2ggZmlsdGVyXG4gICAgICAkc2NvcGUuZmlsdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZmlsdGVyID0gJGZpbHRlcignZmlsdGVyJyk7XG4gICAgICAgICRzY29wZS5maWx0ZXJlZEl0ZW1zID0gZmlsdGVyKCRzY29wZS5vcHRpb25zLml0ZW1zLCAkc2NvcGUub3B0aW9ucy5zZWFyY2hGaWx0ZXIpO1xuICAgICAgICAkc2NvcGUuZ2V0UGFnZSgpO1xuICAgICAgfTtcblxuICAgICAgJHNjb3BlLnNlbGVjdEl0ZW0gPSBmdW5jdGlvbiAoaXRlbSkge1xuXG4gICAgICAgIGlmICghJHNjb3BlLm9wdGlvbnMuc2VsZWN0YWJsZSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpbmRleCA9IF8uaW5kZXhPZigkc2NvcGUub3B0aW9ucy5zZWxlY3RlZEl0ZW1zLCBpdGVtKTtcbiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICRzY29wZS5vcHRpb25zLnNlbGVjdGVkSXRlbXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEkc2NvcGUub3B0aW9ucy5tdWx0aVNlbGVjdCAmJiAkc2NvcGUub3B0aW9ucy5zZWxlY3RlZEl0ZW1zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICRzY29wZS5vcHRpb25zLnNlbGVjdGVkSXRlbXMuc3BsaWNlKDAsIDEpO1xuICAgICAgICB9XG4gICAgICAgICRzY29wZS5vcHRpb25zLnNlbGVjdGVkSXRlbXMucHVzaChpdGVtKTtcbiAgICAgIH07XG5cbiAgICAgIC8vc3RvcHMgdGhlIGNsaWNrIGZyb20gZ29pbmcgdG8gdGhlIHJvdyBhbmQgc3dpdGNoaW5nIGl0IGEgc2Vjb25kIHRpbWVcbiAgICAgICRzY29wZS5zZWxlY3RJdGVtQ2hlY2tib3ggPSBmdW5jdGlvbiAoJGV2ZW50LCBpdGVtKSB7XG4gICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgJHNjb3BlLnNlbGVjdEl0ZW0oaXRlbSk7XG4gICAgICB9O1xuXG4gICAgICAkc2NvcGUuaXNTZWxlY3RlZEl0ZW0gPSBmdW5jdGlvbiAoaXRlbSkge1xuXG4gICAgICAgIHZhciBpbmRleCA9IF8uaW5kZXhPZigkc2NvcGUub3B0aW9ucy5zZWxlY3RlZEl0ZW1zLCBpdGVtKTtcbiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH07XG5cbiAgICAgICRzY29wZS50b2dnbGVTZWxlY3RBbGwgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgXy5mb3JFYWNoKCRzY29wZS5maWx0ZXJlZEl0ZW1zLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgaWYgKCEkc2NvcGUuaXNTZWxlY3RlZEl0ZW0oaXRlbSkpIHtcbiAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdEl0ZW0oaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgXy5mb3JFYWNoKCRzY29wZS5maWx0ZXJlZEl0ZW1zLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgaWYgKCRzY29wZS5pc1NlbGVjdGVkSXRlbShpdGVtKSkge1xuICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0SXRlbShpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgLy9sb2NrcyB0aGUgdGFibGUsIGdvdCB0aGUgaWRlYSBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS90dXJuL2FuZ3VsYXItbG9jay1jb2x1bW4td2lkdGhzXG4gICAgICAvL2ZpeHMgYSBwcm9ibGVtIHdoZXJlIGF1dG8gc2l6ZSBjaGFuZ2VzIGZyb20gcGFnZSB0byBwYWdlXG4gICAgICAkc2NvcGUubG9ja1RhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoISRzY29wZS5vcHRpb25zLmxvY2tUYWJsZSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vd2FpdCBmb3IgZG9tIHRvIHJlbmRlciBzbyB3ZSBjYW4gZmluZCB0aGUgdGhzXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgdGhzID0gYW5ndWxhci5lbGVtZW50KCRlbGVtZW50KS5maW5kKCdkaXYgdGFibGUgdGhlYWQgdHIgdGgnKTtcblxuICAgICAgICAgIC8vIGdvaW5nIHRvIGFzc3VtZSBlYWNoIGVsZW1lbnQgaXMgaW4gdGhlIHNhbWUgb3JkZXIgYXMgY29sdW1lcywgaWYgdGhleSBhcmUgc2V0IHRvIGF1dG8sIHdlIGFyZVxuICAgICAgICAgIC8vIGdvaW5nIHRvIGhhcmQgY29kZSB0aGVyZSB3aWR0aFxuICAgICAgICAgIHZhciBpID0gMDtcblxuICAgICAgICAgIF8uZm9yRWFjaCh0aHMsIGZ1bmN0aW9uICh0aCkge1xuICAgICAgICAgICAgdmFyIGUgPSBhbmd1bGFyLmVsZW1lbnQodGgpO1xuXG4gICAgICAgICAgICBpZiAoJHNjb3BlLm9wdGlvbnMuc2VsZWN0YWJsZSAmJiBpID09PSAwKSB7IC8vc2tpcCB0aGUgZmlyc3QgdGgsIGFuZCByZXNldCBpO1xuICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgkc2NvcGUub3B0aW9ucy5jb2x1bW5zW2ldLndpZHRoID09PSAnYXV0bycpIHtcbiAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KGUpLmNzcygnd2lkdGgnLCB0aC5vZmZzZXRXaWR0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpKys7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvL25vdyBsb2NrIHRoZSB0YWJsZSBzbyBpdCBkb2Vzbid0IGNoYW5nZVxuICAgICAgICAgIHZhciB0YWJsZSA9IGFuZ3VsYXIuZWxlbWVudCgkZWxlbWVudCkuZmluZCgnZGl2IHRhYmxlJyk7XG4gICAgICAgICAgYW5ndWxhci5lbGVtZW50KHRhYmxlKS5jc3MoJ3RhYmxlLWxheW91dCcsICdmaXhlZCcpO1xuICAgICAgICB9LCAwKTtcbiAgICAgIH07XG5cbiAgICAgIC8vZXZlcnl0aGluZyBpcyBzZXR1cCwgZmlsbGVyIGFuZCBzb3J0XG4gICAgICAkc2NvcGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgaWYgKCRzY29wZS5vcHRpb25zLnNlYXJjaEZpbHRlciAhPT0gJycpIHtcbiAgICAgICAgICAkc2NvcGUuZmlsdGVyKCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY29sID0gXy5maW5kKCRzY29wZS5vcHRpb25zLmNvbHVtbnMsICdzb3J0ZWQnKTtcbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGNvbCkpIHtcbiAgICAgICAgICAkc2NvcGUuc29ydChjb2wsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAkc2NvcGUuZ2V0UGFnZSgpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAkc2NvcGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHNjb3BlLnNldFVuZGVmaW5lZCgpO1xuICAgICAgICAkc2NvcGUuZ2V0TG9jYWxTdG9yYWdlKCk7XG4gICAgICAgICRzY29wZS5zZXRXYXRjaGVzKCk7XG4gICAgICAgICRzY29wZS5sb2NrVGFibGUoKTtcblxuICAgICAgICAkc2NvcGUuc3RhcnQoKTtcbiAgICAgIH07XG4gICAgICAkc2NvcGUuaW5pdCgpO1xuXG4gICAgICAvLyAqKioqKioqIEV4cG9ydDogKioqKioqKlxuXG4gICAgICAkc2NvcGUuZXhwb3J0VHlwZXMgPSB7XG4gICAgICAgIEZJTFRFUkVEOiAwLFxuICAgICAgICBTRUxFQ1RFRDogMSxcbiAgICAgICAgQUxMOiAyXG4gICAgICB9O1xuXG5cbiAgICAgICRzY29wZS5HZXRSb3dzRm9yRXhwb3J0ID0gZnVuY3Rpb24gKGV4cG9ydFR5cGUsIGZpZWxkTmFtZXMsIGNzdkRhdGEpIHtcblxuICAgICAgICB2YXIgaXRlbUluZGV4ID0gMDtcbiAgICAgICAgdmFyIGN1ckNlbGxSYXcgPSAnJztcbiAgICAgICAgdmFyIGl0ZW1zVG9FeHBvcnQgPSBbXTtcblxuICAgICAgICAvLyBXaGF0IGl0ZW1zIHdlIGFyZSBpbXBvcnRpbmc/XG4gICAgICAgIHN3aXRjaCAoZXhwb3J0VHlwZSkge1xuICAgICAgICAgIGNhc2UgJHNjb3BlLmV4cG9ydFR5cGVzLkZJTFRFUkVEOlxuICAgICAgICAgICAgaXRlbXNUb0V4cG9ydCA9ICRzY29wZS5kaXNwbGF5ZWRJdGVtcztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJHNjb3BlLmV4cG9ydFR5cGVzLlNFTEVDVEVEOlxuICAgICAgICAgICAgaXRlbXNUb0V4cG9ydCA9ICRzY29wZS5vcHRpb25zLnNlbGVjdGVkSXRlbXM7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICRzY29wZS5leHBvcnRUeXBlcy5BTEw6XG4gICAgICAgICAgICBpdGVtc1RvRXhwb3J0ID0gJHNjb3BlLm9wdGlvbnMuaXRlbXM7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdvIHRocm91Z2ggZXZlcnkgaXRlbVxuICAgICAgICBfLmVhY2goaXRlbXNUb0V4cG9ydCwgZnVuY3Rpb24gKGl0ZW1Ub0V4cG9ydCkge1xuXG4gICAgICAgICAgLy8gR28gdGhyb3VnaCBmaWVsZHNcbiAgICAgICAgICBfLmVhY2goZmllbGROYW1lcywgZnVuY3Rpb24gKGZpZWxkTmFtZSkge1xuXG4gICAgICAgICAgICAvLyBJcyBmaWVsZCBuYW1lIGRlZmluZWQ/XG4gICAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoaXRlbVRvRXhwb3J0W2ZpZWxkTmFtZV0pKSB7XG4gICAgICAgICAgICAgIGN1ckNlbGxSYXcgPSBpdGVtVG9FeHBvcnRbZmllbGROYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGl0ZW1Ub0V4cG9ydC5zZWFyY2gpICYmIGFuZ3VsYXIuaXNEZWZpbmVkKGl0ZW1Ub0V4cG9ydC5zZWFyY2hbZmllbGROYW1lXSkpIHtcbiAgICAgICAgICAgICAgLy8gWWVzLCBzbyBnZXQgdGhlIGNlbGwgdmFsdWVcbiAgICAgICAgICAgICAgY3VyQ2VsbFJhdyA9IGl0ZW1Ub0V4cG9ydC5zZWFyY2hbZmllbGROYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAvLyBUT0RPOiBTaG91bGRuJ3QgcmVhY2ggdGhpcywgdGhpcyBoYXBwZW5zIHdoZW4gYSBtb2RlbCBkaXJlY3RpdmUgaXNuJ3QgbG9hZGVkIGR1ZSB0byBwYWdpbmdcbiAgICAgICAgICAgICAgY3VyQ2VsbFJhdyA9ICcnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjc3ZEYXRhICs9ICdcIicgKyAkc2NvcGUuY3N2U3RyaW5naWZ5KGN1ckNlbGxSYXcpICsgJ1wiLCc7ICAgLy8gQ3JlYXRlcyBhIG5ldyByb3cgaW4gQ1NWXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjc3ZEYXRhID0gJHNjb3BlLnN3YXBMYXN0Q29tbWFGb3JOZXdsaW5lKGNzdkRhdGEpO1xuICAgICAgICAgIGl0ZW1JbmRleCsrO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gY3N2RGF0YTtcbiAgICAgIH07XG5cbiAgICAgIC8vIENsZWFuIHVwIHRoZSBzdHJpbmcuXG4gICAgICAkc2NvcGUuY3N2U3RyaW5naWZ5ID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICBpZiAoc3RyID09PSBudWxsIHx8IGFuZ3VsYXIuaXNVbmRlZmluZWQoc3RyKSkge1xuICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoYW5ndWxhci5pc051bWJlcihzdHIpKSB7XG4gICAgICAgICAgcmV0dXJuICcnICsgc3RyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhbmd1bGFyLmlzQm9vbGVhbihzdHIpKSB7XG4gICAgICAgICAgcmV0dXJuIChzdHIgPyAnVHJ1ZScgOiAnRmFsc2UnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYW5ndWxhci5pc1N0cmluZyhzdHIpKSB7XG4gICAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9cIi9nLCAnXCJcIicpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGFuZ3VsYXIudG9Kc29uKCBzdHIgKS5yZXBsYWNlKC9cIi9nLCAnXCJcIicpO1xuICAgICAgfTtcblxuXG4gICAgICAvLyBEZWxldGUgbGFzdCBjb21tYSBmcm9tIENTViBzdHJpbmcuXG4gICAgICAkc2NvcGUuc3dhcExhc3RDb21tYUZvck5ld2xpbmUgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIHZhciBuZXdTdHIgPSBzdHIuc3Vic3RyKDAsIHN0ci5sZW5ndGggLSAxKTtcbiAgICAgICAgcmV0dXJuIG5ld1N0ciArICdcXG4nO1xuICAgICAgfTtcblxuXG4gICAgICAvLyBDcmVhdGUgYSBkb3dubG9hZGFibGUgbGluayBhbmQgY2xpY2sgaXQuXG4gICAgICAkc2NvcGUuU3VibWl0RmlsZVRvVXNlciA9IGZ1bmN0aW9uIChjc3ZEYXRhKSB7XG4gICAgICAgIHZhciBlbGVtZW50ID0gYW5ndWxhci5lbGVtZW50KCc8YS8+Jyk7XG4gICAgICAgIGVsZW1lbnQuYXR0cih7XG4gICAgICAgICAgaHJlZjogJ2RhdGE6YXR0YWNobWVudC9jc3Y7Y2hhcnNldD11dGYtOCwnICsgZW5jb2RlVVJJKGNzdkRhdGEpLFxuICAgICAgICAgIHRhcmdldDogJ19ibGFuaycsXG4gICAgICAgICAgZG93bmxvYWQ6ICdleHBvcnQuY3N2J1xuICAgICAgICB9KVswXS5jbGljaygpO1xuICAgICAgfTtcblxuXG4gICAgICAkc2NvcGUuRXhwb3J0ID0gZnVuY3Rpb24gKGV4cG9ydFR5cGUpIHtcblxuICAgICAgICB2YXIgZmllbGROYW1lcyA9IFtdO1xuICAgICAgICB2YXIgY3N2RGF0YSA9ICcnO1xuICAgICAgICB2YXIgcmVxdWVzdHMgPSBbXTtcblxuXG4gICAgICAgIC8vIEdldCBjb2x1bW4gbmFtZXMgZm9yIGRpc3BsYXlpbmcgaW4gYSByZXBvcnQgYW5kIG5hbWVzIG9mIGFsbCBmaWVsZHNcbiAgICAgICAgXy5lYWNoKCRzY29wZS5vcHRpb25zLmNvbHVtbnMsIGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgZmllbGROYW1lcy5wdXNoKGMuZmllbGQpO1xuICAgICAgICAgIHJlcXVlc3RzLnB1c2goYy5uYW1lKTtcblxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBDcmVhdGUgYSBoZWFkZXIgZm9yIENTViBFeHBvcnRcbiAgICAgICAgXy5lYWNoKHJlcXVlc3RzLCBmdW5jdGlvbiAodikge1xuICAgICAgICAgIGNzdkRhdGEgKz0gJ1wiJyArICRzY29wZS5jc3ZTdHJpbmdpZnkodikgKyAnXCIsJztcbiAgICAgICAgfSk7XG5cblxuICAgICAgICBjc3ZEYXRhID0gJHNjb3BlLnN3YXBMYXN0Q29tbWFGb3JOZXdsaW5lKGNzdkRhdGEpO1xuICAgICAgICBjc3ZEYXRhID0gJHNjb3BlLkdldFJvd3NGb3JFeHBvcnQoZXhwb3J0VHlwZSwgZmllbGROYW1lcywgY3N2RGF0YSk7XG5cbiAgICAgICAgLy8gU2VuZCBpdCB0byB1c2VyXG4gICAgICAgICRzY29wZS5TdWJtaXRGaWxlVG9Vc2VyKGNzdkRhdGEpO1xuXG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn0pO1xuLy8qKioqKioqKioqIEV4cG9ydHMgZW5kcyBoZXJlICoqKioqKioqKipcblxuXG5cblxuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vLyBGb3VuZCByZWZlcmVuY2UgZm9yIHNvcnQgYXQgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xNzE1NTg1Ni9hbmd1bGFyanMtbmctcmVwZWF0LW9yZGVyYnktb3JkZXJzLW51bWJlcnMtaW5jb3JyZWN0bHlcbi8vIHVzZWQgb3JkZXJCeSBzb3VyY2UgZm9yIGV4YW1wbGUgYXQgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9ibG9iL21hc3Rlci9zcmMvbmcvZmlsdGVyL29yZGVyQnkuanMjTDNcblxuYW5ndWxhci5tb2R1bGUoJ2JzZ3JpZCcpLmZpbHRlcignbmF0dXJhbFNvcnRCeScsZnVuY3Rpb24oJHBhcnNlKXtcbiAgICBmdW5jdGlvbiBuYXR1cmFsU29ydCAoYSwgYikge1xuICAgICAgICB2YXIgcmUgPSAvKF4tP1swLTldKyhcXC4/WzAtOV0qKVtkZl0/ZT9bMC05XT8kfF4weFswLTlhLWZdKyR8WzAtOV0rKS9naSxcbiAgICAgICAgICAgIHNyZSA9IC8oXlsgXSp8WyBdKiQpL2csXG4gICAgICAgICAgICBkcmUgPSAvKF4oW1xcdyBdKyw/W1xcdyBdKyk/W1xcdyBdKyw/W1xcdyBdK1xcZCs6XFxkKyg6XFxkKyk/W1xcdyBdP3xeXFxkezEsNH1bXFwvXFwtXVxcZHsxLDR9W1xcL1xcLV1cXGR7MSw0fXxeXFx3KywgXFx3KyBcXGQrLCBcXGR7NH0pLyxcbiAgICAgICAgICAgIGhyZSA9IC9eMHhbMC05YS1mXSskL2ksXG4gICAgICAgICAgICBvcmUgPSAvXjAvLFxuICAgICAgICAgICAgaSA9IGZ1bmN0aW9uKHMpIHsgcmV0dXJuIG5hdHVyYWxTb3J0Lmluc2Vuc2l0aXZlICYmICgnJytzKS50b0xvd2VyQ2FzZSgpIHx8ICcnK3MgfSxcbiAgICAgICAgLy8gY29udmVydCBhbGwgdG8gc3RyaW5ncyBzdHJpcCB3aGl0ZXNwYWNlXG4gICAgICAgICAgICB4ID0gaShhKS5yZXBsYWNlKHNyZSwgJycpIHx8ICcnLFxuICAgICAgICAgICAgeSA9IGkoYikucmVwbGFjZShzcmUsICcnKSB8fCAnJyxcbiAgICAgICAgLy8gY2h1bmsvdG9rZW5pemVcbiAgICAgICAgICAgIHhOID0geC5yZXBsYWNlKHJlLCAnXFwwJDFcXDAnKS5yZXBsYWNlKC9cXDAkLywnJykucmVwbGFjZSgvXlxcMC8sJycpLnNwbGl0KCdcXDAnKSxcbiAgICAgICAgICAgIHlOID0geS5yZXBsYWNlKHJlLCAnXFwwJDFcXDAnKS5yZXBsYWNlKC9cXDAkLywnJykucmVwbGFjZSgvXlxcMC8sJycpLnNwbGl0KCdcXDAnKSxcbiAgICAgICAgLy8gbnVtZXJpYywgaGV4IG9yIGRhdGUgZGV0ZWN0aW9uXG4gICAgICAgICAgICB4RCA9IHBhcnNlSW50KHgubWF0Y2goaHJlKSkgfHwgKHhOLmxlbmd0aCAhPSAxICYmIHgubWF0Y2goZHJlKSAmJiBEYXRlLnBhcnNlKHgpKSxcbiAgICAgICAgICAgIHlEID0gcGFyc2VJbnQoeS5tYXRjaChocmUpKSB8fCB4RCAmJiB5Lm1hdGNoKGRyZSkgJiYgRGF0ZS5wYXJzZSh5KSB8fCBudWxsLFxuICAgICAgICAgICAgb0Z4TmNMLCBvRnlOY0w7XG4gICAgICAgIC8vIGZpcnN0IHRyeSBhbmQgc29ydCBIZXggY29kZXMgb3IgRGF0ZXNcbiAgICAgICAgaWYgKHlEKVxuICAgICAgICAgICAgaWYgKCB4RCA8IHlEICkgcmV0dXJuIC0xO1xuICAgICAgICAgICAgZWxzZSBpZiAoIHhEID4geUQgKSByZXR1cm4gMTtcbiAgICAgICAgLy8gbmF0dXJhbCBzb3J0aW5nIHRocm91Z2ggc3BsaXQgbnVtZXJpYyBzdHJpbmdzIGFuZCBkZWZhdWx0IHN0cmluZ3NcbiAgICAgICAgZm9yKHZhciBjTG9jPTAsIG51bVM9TWF0aC5tYXgoeE4ubGVuZ3RoLCB5Ti5sZW5ndGgpOyBjTG9jIDwgbnVtUzsgY0xvYysrKSB7XG4gICAgICAgICAgICAvLyBmaW5kIGZsb2F0cyBub3Qgc3RhcnRpbmcgd2l0aCAnMCcsIHN0cmluZyBvciAwIGlmIG5vdCBkZWZpbmVkIChDbGludCBQcmllc3QpXG4gICAgICAgICAgICBvRnhOY0wgPSAhKHhOW2NMb2NdIHx8ICcnKS5tYXRjaChvcmUpICYmIHBhcnNlRmxvYXQoeE5bY0xvY10pIHx8IHhOW2NMb2NdIHx8IDA7XG4gICAgICAgICAgICBvRnlOY0wgPSAhKHlOW2NMb2NdIHx8ICcnKS5tYXRjaChvcmUpICYmIHBhcnNlRmxvYXQoeU5bY0xvY10pIHx8IHlOW2NMb2NdIHx8IDA7XG4gICAgICAgICAgICAvLyBoYW5kbGUgbnVtZXJpYyB2cyBzdHJpbmcgY29tcGFyaXNvbiAtIG51bWJlciA8IHN0cmluZyAtIChLeWxlIEFkYW1zKVxuICAgICAgICAgICAgaWYgKGlzTmFOKG9GeE5jTCkgIT09IGlzTmFOKG9GeU5jTCkpIHsgcmV0dXJuIChpc05hTihvRnhOY0wpKSA/IDEgOiAtMTsgfVxuICAgICAgICAgICAgLy8gcmVseSBvbiBzdHJpbmcgY29tcGFyaXNvbiBpZiBkaWZmZXJlbnQgdHlwZXMgLSBpLmUuICcwMicgPCAyICE9ICcwMicgPCAnMidcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBvRnhOY0wgIT09IHR5cGVvZiBvRnlOY0wpIHtcbiAgICAgICAgICAgICAgICBvRnhOY0wgKz0gJyc7XG4gICAgICAgICAgICAgICAgb0Z5TmNMICs9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9GeE5jTCA8IG9GeU5jTCkgcmV0dXJuIC0xO1xuICAgICAgICAgICAgaWYgKG9GeE5jTCA+IG9GeU5jTCkgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbihhcnJheSwgc29ydFByZWRpY2F0ZSwgcmV2ZXJzZU9yZGVyICkge1xuICAgICAgICBpZiAoIWFuZ3VsYXIuaXNBcnJheShhcnJheSkpIHJldHVybiBhcnJheTtcbiAgICAgICAgaWYgKCFzb3J0UHJlZGljYXRlKSByZXR1cm4gYXJyYXk7XG4gICAgICAgIHNvcnRQcmVkaWNhdGUgPSBhbmd1bGFyLmlzQXJyYXkoc29ydFByZWRpY2F0ZSkgPyBzb3J0UHJlZGljYXRlOiBbc29ydFByZWRpY2F0ZV07XG4gICAgICAgIHNvcnRQcmVkaWNhdGUgPSBfLm1hcChzb3J0UHJlZGljYXRlLCBmdW5jdGlvbihwcmVkaWNhdGUpe1xuICAgICAgICAgICAgdmFyIGRlc2NlbmRpbmcgPSBmYWxzZSxcbiAgICAgICAgICAgICAgICBnZXQgPSBwcmVkaWNhdGUgfHwgYW5ndWxhci5pZGVudGl0eTtcbiAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzU3RyaW5nKHByZWRpY2F0ZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoKHByZWRpY2F0ZS5jaGFyQXQoMCkgPT0gJysnIHx8IHByZWRpY2F0ZS5jaGFyQXQoMCkgPT0gJy0nKSkge1xuICAgICAgICAgICAgICAgICAgICBkZXNjZW5kaW5nID0gcHJlZGljYXRlLmNoYXJBdCgwKSA9PSAnLSc7XG4gICAgICAgICAgICAgICAgICAgIHByZWRpY2F0ZSA9IHByZWRpY2F0ZS5zdWJzdHJpbmcoMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdldCA9ICRwYXJzZShwcmVkaWNhdGUpO1xuICAgICAgICAgICAgICAgIGlmIChnZXQuY29uc3RhbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGdldCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV2ZXJzZUNvbXBhcmF0b3IoZnVuY3Rpb24oYSxiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmF0dXJhbFNvcnQoYVtrZXldLCBiW2tleV0pO1xuICAgICAgICAgICAgICAgICAgICB9LCBkZXNjZW5kaW5nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmV2ZXJzZUNvbXBhcmF0b3IoZnVuY3Rpb24oYSxiKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmF0dXJhbFNvcnQoZ2V0KGEpLGdldChiKSk7XG4gICAgICAgICAgICB9LCBkZXNjZW5kaW5nKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGFycmF5Q29weSA9IFtdO1xuICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykgeyBhcnJheUNvcHkucHVzaChhcnJheVtpXSk7IH1cbiAgICAgICAgcmV0dXJuIGFycmF5Q29weS5zb3J0KHJldmVyc2VDb21wYXJhdG9yKGNvbXBhcmF0b3IsIHJldmVyc2VPcmRlcikpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGNvbXBhcmF0b3IobzEsIG8yKXtcbiAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IHNvcnRQcmVkaWNhdGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29tcCA9IHNvcnRQcmVkaWNhdGVbaV0obzEsIG8yKTtcbiAgICAgICAgICAgICAgICBpZiAoY29tcCAhPT0gMCkgcmV0dXJuIGNvbXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiByZXZlcnNlQ29tcGFyYXRvcihjb21wLCBkZXNjZW5kaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVzY2VuZGluZ1xuICAgICAgICAgICAgICAgID8gZnVuY3Rpb24oYSxiKXtyZXR1cm4gY29tcChiLGEpO31cbiAgICAgICAgICAgICAgICA6IGNvbXA7XG4gICAgICAgIH1cblxuICAgIH1cbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
